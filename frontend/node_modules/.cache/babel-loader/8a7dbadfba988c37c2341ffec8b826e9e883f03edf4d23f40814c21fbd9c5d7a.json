{"ast":null,"code":"import { _ as _object_spread } from \"@swc/helpers/_/_object_spread\";\nimport { _ as _object_spread_props } from \"@swc/helpers/_/_object_spread_props\";\nimport { _ as _object_without_properties } from \"@swc/helpers/_/_object_without_properties\";\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { useCallback } from \"react\";\nimport * as React from \"react\";\nimport { classNames } from \"@vkontakte/vkjs\";\nimport { useFloatingElement } from \"../../hooks/useFloatingElement.js\";\nimport { injectAriaExpandedPropByRole } from \"../../lib/accessibility.js\";\nimport { animationFadeClassNames, transformOriginClassNames } from \"../../lib/animation/index.js\";\nimport { AppRootPortal } from \"../AppRoot/AppRootPortal.js\";\nimport { DEFAULT_ARROW_HEIGHT, DEFAULT_ARROW_PADDING, DefaultIcon } from \"../FloatingArrow/DefaultIcon.js\";\nimport { FloatingArrow } from \"../FloatingArrow/FloatingArrow.js\";\nimport { FocusTrap } from \"../FocusTrap/FocusTrap.js\";\nexport const usePopover = _param => {\n  var {\n      // UsePopoverProps\n      arrow: withArrow,\n      arrowHeight = DEFAULT_ARROW_HEIGHT,\n      arrowPadding = DEFAULT_ARROW_PADDING,\n      placement = 'bottom-start',\n      onPlacementChange,\n      disableFlipMiddleware = false,\n      trigger = 'click',\n      strategy,\n      content,\n      hoverDelay = 150,\n      closeAfterClick,\n      offsetByMainAxis = 8,\n      offsetByCrossAxis = 0,\n      sameWidth,\n      hideWhenReferenceHidden,\n      onReferenceHiddenChange,\n      disabled,\n      disableInteractive,\n      disableCloseOnClickOutside,\n      disableCloseOnEscKey,\n      keepMounted = false,\n      customMiddlewares,\n      // uncontrolled\n      defaultShown = false,\n      // controlled\n      shown: shownProp,\n      onShownChange,\n      onShownChanged,\n      // Для AppRootPortal\n      usePortal = true,\n      // Для FloatingArrow\n      arrowProps,\n      ArrowIcon = DefaultIcon,\n      // FocusTrapProps\n      autoFocus = true,\n      restoreFocus = true,\n      className,\n      noStyling = false,\n      zIndex = 'var(--vkui--z_index_popout)',\n      disableFocusTrap,\n      // a11y\n      role = 'dialog'\n    } = _param,\n    restPopoverProps = _object_without_properties(_param, [\"arrow\", \"arrowHeight\", \"arrowPadding\", \"placement\", \"onPlacementChange\", \"disableFlipMiddleware\", \"trigger\", \"strategy\", \"content\", \"hoverDelay\", \"closeAfterClick\", \"offsetByMainAxis\", \"offsetByCrossAxis\", \"sameWidth\", \"hideWhenReferenceHidden\", \"onReferenceHiddenChange\", \"disabled\", \"disableInteractive\", \"disableCloseOnClickOutside\", \"disableCloseOnEscKey\", \"keepMounted\", \"customMiddlewares\", \"defaultShown\", \"shown\", \"onShownChange\", \"onShownChanged\", \"usePortal\", \"arrowProps\", \"ArrowIcon\", \"autoFocus\", \"restoreFocus\", \"className\", \"noStyling\", \"zIndex\", \"disableFocusTrap\", \"role\"]);\n  const renderFloatingComponent = React.useCallback(_ref => {\n    let {\n      shown,\n      middlewareData,\n      placement: resolvedPlacement,\n      setArrowRef,\n      floatingRef,\n      floatingProps,\n      willBeHide,\n      onRestoreFocus,\n      onClose\n    } = _ref;\n    if (!shown && !keepMounted) {\n      return null;\n    }\n    const hidden = keepMounted && !shown;\n    let arrow = null;\n    if (withArrow) {\n      const {\n        arrow: arrowCoords\n      } = middlewareData;\n      arrow = /*#__PURE__*/_jsx(FloatingArrow, _object_spread_props(_object_spread({\n        iconClassName: noStyling ? undefined : \"vkuiPopover__arrow\"\n      }, arrowProps), {\n        coords: arrowCoords,\n        placement: resolvedPlacement,\n        getRootRef: setArrowRef,\n        Icon: ArrowIcon\n      }));\n    }\n    return /*#__PURE__*/_jsx(AppRootPortal, {\n      usePortal: usePortal,\n      children: /*#__PURE__*/_jsx(\"div\", _object_spread_props(_object_spread({\n        ref: floatingRef,\n        className: classNames(\"vkuiPopover__host\", hidden && \"vkuiPopover__hidden\")\n      }, floatingProps), {\n        style: _object_spread({\n          zIndex: !hidden ? zIndex : undefined\n        }, floatingProps.style),\n        children: /*#__PURE__*/_jsxs(FocusTrap, _object_spread_props(_object_spread({}, restPopoverProps), {\n          role: role,\n          className: classNames(\"vkuiPopover__in\", noStyling ? undefined : \"vkuiPopover__inWithStyling\", willBeHide ? animationFadeClassNames.out : animationFadeClassNames.in, transformOriginClassNames[resolvedPlacement], className),\n          mount: !hidden,\n          disabled: hidden || disableFocusTrap,\n          autoFocus: disableInteractive ? false : autoFocus,\n          restoreFocus: restoreFocus ? () => onRestoreFocus(restoreFocus) : false,\n          children: [arrow, typeof content === 'function' ? content({\n            onClose\n          }) : content]\n        }))\n      }))\n    });\n  }, [ArrowIcon, arrowProps, autoFocus, className, content, disableFocusTrap, disableInteractive, keepMounted, noStyling, restPopoverProps, restoreFocus, role, usePortal, withArrow, zIndex]);\n  const remapReferenceProps = useCallback(_param => {\n    var {\n        shown\n      } = _param,\n      referenceProps = _object_without_properties(_param, [\"shown\"]);\n    return injectAriaExpandedPropByRole(referenceProps, shown, role);\n  }, [role]);\n  const {\n    anchorRef,\n    anchorProps,\n    component\n  } = useFloatingElement({\n    arrow: withArrow,\n    arrowHeight,\n    arrowPadding,\n    placement,\n    offsetByMainAxis,\n    offsetByCrossAxis,\n    sameWidth,\n    hideWhenReferenceHidden,\n    disableFlipMiddleware,\n    customMiddlewares,\n    trigger,\n    strategy,\n    hoverDelay,\n    onReferenceHiddenChange,\n    closeAfterClick,\n    disabled,\n    disableInteractive,\n    disableCloseOnClickOutside,\n    disableCloseOnEscKey,\n    defaultShown,\n    shown: shownProp,\n    onShownChange,\n    onShownChanged,\n    onPlacementChange,\n    renderFloatingComponent,\n    remapReferenceProps\n  });\n  return {\n    anchorRef,\n    anchorProps,\n    popover: component\n  };\n};","map":{"version":3,"names":["useCallback","React","classNames","useFloatingElement","injectAriaExpandedPropByRole","animationFadeClassNames","transformOriginClassNames","AppRootPortal","DEFAULT_ARROW_HEIGHT","DEFAULT_ARROW_PADDING","DefaultIcon","FloatingArrow","FocusTrap","usePopover","_param","arrow","withArrow","arrowHeight","arrowPadding","placement","onPlacementChange","disableFlipMiddleware","trigger","strategy","content","hoverDelay","closeAfterClick","offsetByMainAxis","offsetByCrossAxis","sameWidth","hideWhenReferenceHidden","onReferenceHiddenChange","disabled","disableInteractive","disableCloseOnClickOutside","disableCloseOnEscKey","keepMounted","customMiddlewares","defaultShown","shown","shownProp","onShownChange","onShownChanged","usePortal","arrowProps","ArrowIcon","autoFocus","restoreFocus","className","noStyling","zIndex","disableFocusTrap","role","restPopoverProps","_object_without_properties","renderFloatingComponent","_ref","middlewareData","resolvedPlacement","setArrowRef","floatingRef","floatingProps","willBeHide","onRestoreFocus","onClose","hidden","arrowCoords","_jsx","_object_spread_props","_object_spread","iconClassName","undefined","coords","getRootRef","Icon","ref","style","_jsxs","out","in","mount","remapReferenceProps","referenceProps","anchorRef","anchorProps","component","popover"],"sources":["/Users/viktoriaromazanova/PycharmProjects/vk_chatgpt/frontend/node_modules/@vkontakte/vkui/src/components/Popover/usePopover.tsx"],"sourcesContent":["import { type Ref, useCallback } from 'react';\nimport * as React from 'react';\nimport { classNames } from '@vkontakte/vkjs';\nimport { useFloatingElement, type UseFloatingElementProps } from '../../hooks/useFloatingElement';\nimport { injectAriaExpandedPropByRole } from '../../lib/accessibility';\nimport { animationFadeClassNames, transformOriginClassNames } from '../../lib/animation';\nimport { type ReferenceProps } from '../../lib/floating/useFloatingWithInteractions/types';\nimport { AppRootPortal } from '../AppRoot/AppRootPortal';\nimport {\n  DEFAULT_ARROW_HEIGHT,\n  DEFAULT_ARROW_PADDING,\n  DefaultIcon,\n} from '../FloatingArrow/DefaultIcon';\nimport { FloatingArrow } from '../FloatingArrow/FloatingArrow';\nimport { FocusTrap } from '../FocusTrap/FocusTrap';\nimport { type PopoverProps } from './Popover';\nimport styles from './Popover.module.css';\n\nexport type UsePopoverProps = Omit<PopoverProps, 'children'> & {\n  [key: `data-${string}`]: string | number | boolean;\n};\n\nexport type UsePopoverResult<ElementType extends HTMLElement = HTMLElement> = {\n  anchorRef: Ref<ElementType>;\n  anchorProps: ReferenceProps<ElementType>;\n  popover: React.ReactNode | null;\n};\n\nexport const usePopover = <ElementType extends HTMLElement = HTMLElement>({\n  // UsePopoverProps\n  arrow: withArrow,\n  arrowHeight = DEFAULT_ARROW_HEIGHT,\n  arrowPadding = DEFAULT_ARROW_PADDING,\n  placement = 'bottom-start',\n  onPlacementChange,\n  disableFlipMiddleware = false,\n  trigger = 'click',\n  strategy,\n  content,\n  hoverDelay = 150,\n  closeAfterClick,\n  offsetByMainAxis = 8,\n  offsetByCrossAxis = 0,\n  sameWidth,\n  hideWhenReferenceHidden,\n  onReferenceHiddenChange,\n  disabled,\n  disableInteractive,\n  disableCloseOnClickOutside,\n  disableCloseOnEscKey,\n  keepMounted = false,\n  customMiddlewares,\n  // uncontrolled\n  defaultShown = false,\n  // controlled\n  shown: shownProp,\n  onShownChange,\n  onShownChanged,\n\n  // Для AppRootPortal\n  usePortal = true,\n\n  // Для FloatingArrow\n  arrowProps,\n  ArrowIcon = DefaultIcon,\n\n  // FocusTrapProps\n  autoFocus = true,\n  restoreFocus = true,\n  className,\n  noStyling = false,\n  zIndex = 'var(--vkui--z_index_popout)',\n  disableFocusTrap,\n  // a11y\n  role = 'dialog',\n  ...restPopoverProps\n}: UsePopoverProps): UsePopoverResult<ElementType> => {\n  const renderFloatingComponent: UseFloatingElementProps<HTMLDivElement>['renderFloatingComponent'] =\n    React.useCallback(\n      ({\n        shown,\n        middlewareData,\n        placement: resolvedPlacement,\n        setArrowRef,\n        floatingRef,\n        floatingProps,\n        willBeHide,\n        onRestoreFocus,\n        onClose,\n      }) => {\n        if (!shown && !keepMounted) {\n          return null;\n        }\n        const hidden = keepMounted && !shown;\n\n        let arrow: React.ReactElement | null = null;\n        if (withArrow) {\n          const { arrow: arrowCoords } = middlewareData;\n          arrow = (\n            <FloatingArrow\n              iconClassName={noStyling ? undefined : styles.arrow}\n              {...arrowProps}\n              coords={arrowCoords}\n              placement={resolvedPlacement}\n              getRootRef={setArrowRef}\n              Icon={ArrowIcon}\n            />\n          );\n        }\n        return (\n          <AppRootPortal usePortal={usePortal}>\n            <div\n              ref={floatingRef}\n              className={classNames(styles.host, hidden && styles.hidden)}\n              {...floatingProps}\n              style={{\n                zIndex: !hidden ? zIndex : undefined,\n                ...floatingProps.style,\n              }}\n            >\n              <FocusTrap\n                {...restPopoverProps}\n                role={role}\n                className={classNames(\n                  styles.in,\n                  noStyling ? undefined : styles.inWithStyling,\n                  willBeHide ? animationFadeClassNames.out : animationFadeClassNames.in,\n                  transformOriginClassNames[resolvedPlacement],\n                  className,\n                )}\n                mount={!hidden}\n                disabled={hidden || disableFocusTrap}\n                autoFocus={disableInteractive ? false : autoFocus}\n                restoreFocus={restoreFocus ? () => onRestoreFocus(restoreFocus) : false}\n              >\n                {arrow}\n                {typeof content === 'function' ? content({ onClose }) : content}\n              </FocusTrap>\n            </div>\n          </AppRootPortal>\n        );\n      },\n      [\n        ArrowIcon,\n        arrowProps,\n        autoFocus,\n        className,\n        content,\n        disableFocusTrap,\n        disableInteractive,\n        keepMounted,\n        noStyling,\n        restPopoverProps,\n        restoreFocus,\n        role,\n        usePortal,\n        withArrow,\n        zIndex,\n      ],\n    );\n\n  const remapReferenceProps: Exclude<UseFloatingElementProps['remapReferenceProps'], undefined> =\n    useCallback(\n      ({ shown, ...referenceProps }) => injectAriaExpandedPropByRole(referenceProps, shown, role),\n      [role],\n    );\n\n  const { anchorRef, anchorProps, component } = useFloatingElement<ElementType, HTMLDivElement>({\n    arrow: withArrow,\n    arrowHeight,\n    arrowPadding,\n    placement,\n    offsetByMainAxis,\n    offsetByCrossAxis,\n    sameWidth,\n    hideWhenReferenceHidden,\n    disableFlipMiddleware,\n    customMiddlewares,\n\n    trigger,\n    strategy,\n    hoverDelay,\n    onReferenceHiddenChange,\n    closeAfterClick,\n    disabled,\n    disableInteractive,\n    disableCloseOnClickOutside,\n    disableCloseOnEscKey,\n    defaultShown,\n    shown: shownProp,\n    onShownChange,\n    onShownChanged,\n\n    onPlacementChange,\n    renderFloatingComponent,\n    remapReferenceProps,\n  });\n\n  return {\n    anchorRef,\n    anchorProps,\n    popover: component,\n  };\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}