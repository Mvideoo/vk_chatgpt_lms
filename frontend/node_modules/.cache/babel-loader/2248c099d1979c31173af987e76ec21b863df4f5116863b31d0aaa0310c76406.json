{"ast":null,"code":"'use client';\n\nimport { _ as _object_spread } from \"@swc/helpers/_/_object_spread\";\nimport { _ as _object_without_properties } from \"@swc/helpers/_/_object_without_properties\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { useId, useMemo } from \"react\";\nimport { ModalContext } from \"../../context/ModalContext.js\";\nimport { inRange } from \"../../helpers/range.js\";\nimport { getNavId } from \"../../lib/getNavId.js\";\nimport { SNAP_POINT_DETENTS, SNAP_POINT_SAFE_RANGE } from \"../../lib/sheet/index.js\";\nimport { warnOnce } from \"../../lib/warnOnce.js\";\nimport { useModalManager } from \"../ModalRoot/useModalManager.js\";\nimport { ModalPageInternal } from \"./ModalPageInternal.js\";\nconst warn = warnOnce('ModalPage');\nconst snapPointCache = new Map();\n/**\n * @see https://vkcom.github.io/VKUI/#/ModalPage\n */\nexport const ModalPage = _param => {\n  var {\n      id: idProp,\n      nav,\n      open = false,\n      modalOverlayTestId,\n      noFocusToDialog,\n      onOpen,\n      onOpened,\n      onClose,\n      onClosed,\n      size = 's',\n      settlingHeight = 50,\n      dynamicContentHeight,\n      keepMounted = false\n    } = _param,\n    restProps = _object_without_properties(_param, [\"id\", \"nav\", \"open\", \"modalOverlayTestId\", \"noFocusToDialog\", \"onOpen\", \"onOpened\", \"onClose\", \"onClosed\", \"size\", \"settlingHeight\", \"dynamicContentHeight\", \"keepMounted\"]);\n  const generatingId = useId();\n  const id = getNavId({\n    nav,\n    id: idProp\n  }, warn) || generatingId;\n  const _useModalManager = useModalManager({\n      id,\n      open,\n      keepMounted,\n      modalOverlayTestId,\n      noFocusToDialog,\n      onOpen,\n      onOpened,\n      onClose,\n      onClosed\n    }),\n    {\n      mounted,\n      shouldPreserveSnapPoint\n    } = _useModalManager,\n    resolvedProps = _object_without_properties(_useModalManager, [\"mounted\", \"shouldPreserveSnapPoint\"]);\n  const snapPoint = useMemo(() => {\n    if (dynamicContentHeight) {\n      return 'auto';\n    }\n    if (shouldPreserveSnapPoint) {\n      const snapPointCached = snapPointCache.get(id);\n      if (snapPointCached) {\n        return snapPointCached;\n      }\n      const nextSnapPoint = transformSettlingHeightToSnapPoint(settlingHeight);\n      snapPointCache.set(id, nextSnapPoint);\n      return nextSnapPoint;\n    } else {\n      snapPointCache.delete(id);\n    }\n    return transformSettlingHeightToSnapPoint(settlingHeight);\n  }, [id, shouldPreserveSnapPoint, dynamicContentHeight, settlingHeight]);\n  if (!mounted) {\n    return null;\n  }\n  return /*#__PURE__*/_jsx(ModalContext.Provider, {\n    value: id,\n    children: /*#__PURE__*/_jsx(ModalPageInternal, _object_spread({\n      id: id,\n      size: size,\n      \"aria-labelledby\": `${id}-label`,\n      snapPoint: snapPoint,\n      onSnapPointChange: snapPoint !== 'auto' && shouldPreserveSnapPoint ? snapPoint => {\n        const snapPointCached = snapPointCache.get(id);\n        if (snapPointCached) {\n          snapPointCached.initial = snapPoint;\n          snapPointCache.set(id, snapPointCached);\n        }\n      } : undefined\n    }, resolvedProps, restProps))\n  });\n};\nfunction transformSettlingHeightToSnapPoint(settlingHeight) {\n  const currentSnapPoint = Math.min(Math.max(settlingHeight, SNAP_POINT_SAFE_RANGE.LOWER), SNAP_POINT_DETENTS.LARGE);\n  return {\n    initial: currentSnapPoint,\n    detents: inRange(currentSnapPoint, SNAP_POINT_SAFE_RANGE.LOWER, SNAP_POINT_SAFE_RANGE.HIGHEST) ? [SNAP_POINT_DETENTS.MIN, currentSnapPoint, SNAP_POINT_DETENTS.LARGE] : [SNAP_POINT_DETENTS.MIN, currentSnapPoint]\n  };\n}","map":{"version":3,"names":["useId","useMemo","ModalContext","inRange","getNavId","SNAP_POINT_DETENTS","SNAP_POINT_SAFE_RANGE","warnOnce","useModalManager","ModalPageInternal","warn","snapPointCache","Map","ModalPage","_param","id","idProp","nav","open","modalOverlayTestId","noFocusToDialog","onOpen","onOpened","onClose","onClosed","size","settlingHeight","dynamicContentHeight","keepMounted","restProps","_object_without_properties","generatingId","_useModalManager","mounted","shouldPreserveSnapPoint","resolvedProps","snapPoint","snapPointCached","get","nextSnapPoint","transformSettlingHeightToSnapPoint","set","delete","_jsx","Provider","value","_object_spread","onSnapPointChange","initial","undefined","currentSnapPoint","Math","min","max","LOWER","LARGE","detents","HIGHEST","MIN"],"sources":["/Users/viktoriaromazanova/PycharmProjects/vk_chatgpt/frontend/node_modules/@vkontakte/vkui/src/components/ModalPage/ModalPage.tsx"],"sourcesContent":["'use client';\n\nimport { useId, useMemo } from 'react';\nimport { ModalContext } from '../../context/ModalContext';\nimport { inRange } from '../../helpers/range';\nimport { getNavId } from '../../lib/getNavId';\nimport { SNAP_POINT_DETENTS, SNAP_POINT_SAFE_RANGE, type SnapPoint } from '../../lib/sheet';\nimport { warnOnce } from '../../lib/warnOnce';\nimport { useModalManager } from '../ModalRoot/useModalManager';\nimport { ModalPageInternal } from './ModalPageInternal';\nimport type { ModalPageProps } from './types';\n\nconst warn = warnOnce('ModalPage');\n\nconst snapPointCache = new Map<string, Exclude<SnapPoint, 'auto'>>();\n\n/**\n * @see https://vkcom.github.io/VKUI/#/ModalPage\n */\nexport const ModalPage = ({\n  id: idProp,\n  nav,\n  open = false,\n  modalOverlayTestId,\n  noFocusToDialog,\n  onOpen,\n  onOpened,\n  onClose,\n  onClosed,\n  size = 's',\n  settlingHeight = 50,\n  dynamicContentHeight,\n  keepMounted = false,\n  ...restProps\n}: ModalPageProps) => {\n  const generatingId = useId();\n  const id = getNavId({ nav, id: idProp }, warn) || generatingId;\n\n  const { mounted, shouldPreserveSnapPoint, ...resolvedProps } = useModalManager({\n    id,\n    open,\n    keepMounted,\n    modalOverlayTestId,\n    noFocusToDialog,\n    onOpen,\n    onOpened,\n    onClose,\n    onClosed,\n  });\n\n  const snapPoint = useMemo((): SnapPoint => {\n    if (dynamicContentHeight) {\n      return 'auto';\n    }\n\n    if (shouldPreserveSnapPoint) {\n      const snapPointCached = snapPointCache.get(id);\n\n      if (snapPointCached) {\n        return snapPointCached;\n      }\n\n      const nextSnapPoint = transformSettlingHeightToSnapPoint(settlingHeight);\n      snapPointCache.set(id, nextSnapPoint);\n\n      return nextSnapPoint;\n    } else {\n      snapPointCache.delete(id);\n    }\n\n    return transformSettlingHeightToSnapPoint(settlingHeight);\n  }, [id, shouldPreserveSnapPoint, dynamicContentHeight, settlingHeight]);\n\n  if (!mounted) {\n    return null;\n  }\n\n  return (\n    <ModalContext.Provider value={id}>\n      <ModalPageInternal\n        id={id}\n        size={size}\n        aria-labelledby={`${id}-label`}\n        snapPoint={snapPoint}\n        onSnapPointChange={\n          snapPoint !== 'auto' && shouldPreserveSnapPoint\n            ? (snapPoint) => {\n                const snapPointCached = snapPointCache.get(id);\n\n                if (snapPointCached) {\n                  snapPointCached.initial = snapPoint;\n                  snapPointCache.set(id, snapPointCached);\n                }\n              }\n            : undefined\n        }\n        {...resolvedProps}\n        {...restProps}\n      />\n    </ModalContext.Provider>\n  );\n};\n\nfunction transformSettlingHeightToSnapPoint(settlingHeight: number): Exclude<SnapPoint, 'auto'> {\n  const currentSnapPoint = Math.min(\n    Math.max(settlingHeight, SNAP_POINT_SAFE_RANGE.LOWER),\n    SNAP_POINT_DETENTS.LARGE,\n  );\n\n  return {\n    initial: currentSnapPoint,\n    detents: inRange(currentSnapPoint, SNAP_POINT_SAFE_RANGE.LOWER, SNAP_POINT_SAFE_RANGE.HIGHEST)\n      ? [SNAP_POINT_DETENTS.MIN, currentSnapPoint, SNAP_POINT_DETENTS.LARGE]\n      : [SNAP_POINT_DETENTS.MIN, currentSnapPoint],\n  };\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}