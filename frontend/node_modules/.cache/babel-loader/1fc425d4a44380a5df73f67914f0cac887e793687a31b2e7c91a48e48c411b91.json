{"ast":null,"code":"import { _ as _class_private_field_get } from \"@swc/helpers/_/_class_private_field_get\";\nimport { _ as _class_private_field_init } from \"@swc/helpers/_/_class_private_field_init\";\nimport { _ as _class_private_field_set } from \"@swc/helpers/_/_class_private_field_set\";\nimport { _ as _define_property } from \"@swc/helpers/_/_define_property\";\nimport * as React from \"react\";\nimport { noop } from \"@vkontakte/vkjs\";\nimport { canUseDOM } from \"../lib/dom.js\";\nvar _target = /*#__PURE__*/new WeakMap(),\n  _listener = /*#__PURE__*/new WeakMap();\nclass EventListener {\n  constructor(type, callback, options) {\n    _define_property(this, \"callback\", noop);\n    _define_property(this, \"options\", undefined);\n    _define_property(this, \"eventType\", void 0);\n    _class_private_field_init(this, _target, {\n      writable: true,\n      value: null\n    });\n    _class_private_field_init(this, _listener, {\n      writable: true,\n      value: ev => {\n        this.callback(ev);\n      }\n    });\n    _define_property(this, \"add\", el => {\n      if (!canUseDOM) {\n        return;\n      }\n      this.remove();\n      if (!el) {\n        return;\n      }\n      el.addEventListener(this.eventType, _class_private_field_get(this, _listener), this.options);\n      _class_private_field_set(this, _target, el);\n    });\n    _define_property(this, \"remove\", () => {\n      if (!canUseDOM || !_class_private_field_get(this, _target)) {\n        return;\n      }\n      _class_private_field_get(this, _target).removeEventListener(this.eventType, _class_private_field_get(this, _listener), this.options);\n      _class_private_field_set(this, _target, null);\n    });\n    this.options = options;\n    this.eventType = type;\n    if (callback) {\n      this.callback = callback;\n    }\n  }\n}\nexport function useEventListener(event, _cb, _options) {\n  const ref = React.useRef(null);\n  if (ref.current === null) {\n    ref.current = new EventListener(event, _cb, _options);\n  } else {\n    ref.current.eventType = event;\n    ref.current.options = _options;\n    if (_cb) {\n      ref.current.callback = _cb;\n    }\n  }\n  React.useEffect(() => {\n    var _ref_current;\n    const detach = (_ref_current = ref.current) === null || _ref_current === void 0 ? void 0 : _ref_current.remove.bind(ref.current);\n    return detach;\n  }, []);\n  return ref.current;\n}","map":{"version":3,"names":["React","noop","canUseDOM","_target","WeakMap","_listener","EventListener","constructor","type","callback","options","_define_property","undefined","_class_private_field_init","ev","el","remove","addEventListener","eventType","_class_private_field_get","removeEventListener","useEventListener","event","_cb","_options","ref","useRef","current","useEffect","_ref_current","detach","bind"],"sources":["/Users/viktoriaromazanova/PycharmProjects/vk_chatgpt/frontend/node_modules/@vkontakte/vkui/src/hooks/useEventListener.ts"],"sourcesContent":["import * as React from 'react';\nimport { noop } from '@vkontakte/vkjs';\nimport { canUseDOM } from '../lib/dom';\n\ninterface EventListenerHandle {\n  add: (el: HTMLElement | Document | Window) => void;\n  remove: () => void;\n}\n\nclass EventListener implements EventListenerHandle {\n  callback: (ev: any) => void = noop;\n  options: AddEventListenerOptions | boolean | undefined = undefined;\n  eventType: string;\n  #target: HTMLElement | Document | Window | null = null;\n\n  constructor(\n    type: string,\n    callback: false | null | undefined | ((ev: any) => void),\n    options?: AddEventListenerOptions | boolean,\n  ) {\n    this.options = options;\n    this.eventType = type;\n\n    if (callback) {\n      this.callback = callback;\n    }\n  }\n\n  readonly #listener = (ev: any) => {\n    this.callback(ev);\n  };\n\n  add = (el: HTMLElement | Document | Window) => {\n    if (!canUseDOM) {\n      return;\n    }\n    this.remove();\n    if (!el) {\n      return;\n    }\n\n    el.addEventListener(this.eventType, this.#listener, this.options);\n    this.#target = el;\n  };\n\n  remove = () => {\n    if (!canUseDOM || !this.#target) {\n      return;\n    }\n\n    this.#target.removeEventListener(this.eventType, this.#listener, this.options);\n    this.#target = null;\n  };\n}\n\nexport function useEventListener<K extends keyof GlobalEventHandlersEventMap>(\n  event: K,\n  _cb: false | null | undefined | ((ev: GlobalEventHandlersEventMap[K]) => void),\n  _options?: AddEventListenerOptions,\n): EventListenerHandle;\nexport function useEventListener<E extends Event>(\n  event: string,\n  _cb: false | null | undefined | ((ev: E) => void),\n  _options?: AddEventListenerOptions,\n): EventListenerHandle;\nexport function useEventListener<E extends Event, K extends keyof GlobalEventHandlersEventMap>(\n  event: string | K,\n  _cb: false | null | undefined | ((ev: E) => void),\n  _options?: AddEventListenerOptions,\n): EventListenerHandle {\n  const ref = React.useRef<EventListener | null>(null);\n  if (ref.current === null) {\n    ref.current = new EventListener(event, _cb, _options);\n  } else {\n    ref.current.eventType = event;\n    ref.current.options = _options;\n\n    if (_cb) {\n      ref.current.callback = _cb;\n    }\n  }\n\n  React.useEffect(() => {\n    const detach = ref.current?.remove.bind(ref.current);\n    return detach;\n  }, []);\n\n  return ref.current;\n}\n"],"mappings":";;;;AAAA,YAAYA,KAAA,MAAW;AACvB,SAASC,IAAI,QAAQ;AACrB,SAASC,SAAS,QAAQ;IAWxBC,OAAA,oBAAAC,OAAA;EAeSC,SAAA,oBAAAD,OAAA;AAnBX,MAAME,aAAA;EAMJC,YACEC,IAAY,EACZC,QAAwD,EACxDC,OAA2C,EAC3C;IATFC,gBAAA,mBAA8BV,IAAA;IAC9BU,gBAAA,kBAAyDC,SAAA;IACzDD,gBAAA;IACAE,yBAAA,OAAAV,OAAA;;aAAkD;;IAelDU,yBAAA,OAASR,SAAA;;aAAaS,EAAA;QACpB,IAAI,CAACL,QAAQ,CAACK,EAAA;MAChB;;IAEAH,gBAAA,cAAOI,EAAA;MACL,IAAI,CAACb,SAAA,EAAW;QACd;MACF;MACA,IAAI,CAACc,MAAM;MACX,IAAI,CAACD,EAAA,EAAI;QACP;MACF;MAEAA,EAAA,CAAGE,gBAAgB,CAAC,IAAI,CAACC,SAAS,EAAAC,wBAAA,CAAE,IAAI,EAACd,SAAA,GAAW,IAAI,CAACK,OAAO;qCAC3DP,OAAA,EAAUY,EAAA;IACjB;IAEAJ,gBAAA,iBAAS;MACP,IAAI,CAACT,SAAA,IAAa,CAAAiB,wBAAA,CAAC,IAAI,EAAChB,OAAA,GAAS;QAC/B;MACF;MAEAgB,wBAAA,KAAI,EAAChB,OAAA,EAAQiB,mBAAmB,CAAC,IAAI,CAACF,SAAS,EAAAC,wBAAA,CAAE,IAAI,EAACd,SAAA,GAAW,IAAI,CAACK,OAAO;qCACxEP,OAAA,EAAU;IACjB;IAhCE,IAAI,CAACO,OAAO,GAAGA,OAAA;IACf,IAAI,CAACQ,SAAS,GAAGV,IAAA;IAEjB,IAAIC,QAAA,EAAU;MACZ,IAAI,CAACA,QAAQ,GAAGA,QAAA;IAClB;EACF;AA2BF;AAYA,OAAO,SAASY,iBACdC,KAAiB,EACjBC,GAAiD,EACjDC,QAAkC;EAElC,MAAMC,GAAA,GAAMzB,KAAA,CAAM0B,MAAM,CAAuB;EAC/C,IAAID,GAAA,CAAIE,OAAO,KAAK,MAAM;IACxBF,GAAA,CAAIE,OAAO,GAAG,IAAIrB,aAAA,CAAcgB,KAAA,EAAOC,GAAA,EAAKC,QAAA;EAC9C,OAAO;IACLC,GAAA,CAAIE,OAAO,CAACT,SAAS,GAAGI,KAAA;IACxBG,GAAA,CAAIE,OAAO,CAACjB,OAAO,GAAGc,QAAA;IAEtB,IAAID,GAAA,EAAK;MACPE,GAAA,CAAIE,OAAO,CAAClB,QAAQ,GAAGc,GAAA;IACzB;EACF;EAEAvB,KAAA,CAAM4B,SAAS,CAAC;QACCC,YAAA;IAAf,MAAMC,MAAA,IAASD,YAAA,GAAAJ,GAAA,CAAIE,OAAO,cAAXE,YAAA,uBAAAA,YAAA,CAAab,MAAM,CAACe,IAAI,CAACN,GAAA,CAAIE,OAAO;IACnD,OAAOG,MAAA;EACT,GAAG,EAAE;EAEL,OAAOL,GAAA,CAAIE,OAAO;AACpB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}