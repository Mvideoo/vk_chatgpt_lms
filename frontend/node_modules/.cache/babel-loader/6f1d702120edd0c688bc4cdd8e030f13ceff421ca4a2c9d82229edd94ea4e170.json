{"ast":null,"code":"import { _ as _object_spread } from \"@swc/helpers/_/_object_spread\";\nimport { _ as _object_spread_props } from \"@swc/helpers/_/_object_spread_props\";\nimport { _ as _object_without_properties } from \"@swc/helpers/_/_object_without_properties\";\nimport { autoUpdate as autoUpdateLib } from \"@vkontakte/vkui-floating-ui/react-dom\";\nimport { isHTMLElement } from \"../dom.js\";\nimport { CustomResizeObserver } from \"./customResizeObserver.js\";\nexport { useFloating, offset as offsetMiddleware, flip as flipMiddleware, shift as shiftMiddleware, autoPlacement as autoPlacementMiddleware, arrow as arrowMiddleware, size as sizeMiddleware, hide as hideMiddleware, getOverflowAncestors } from \"@vkontakte/vkui-floating-ui/react-dom\";\nconst defaultOptions = {\n  ancestorScroll: true,\n  ancestorResize: true,\n  // По умолчанию отключаем, т.к. навешивать `CustomResizeObserver` может быть дорого.\n  // В `autoUpdateLib` по умолчанию опция включена. Там используется ResizeObserver, но и он не менее дорогостоящий.\n  // https://github.com/floating-ui/floating-ui/blob/0a34fe9cc2c7483976785a71bd0777cd7c3f2a6a/packages/dom/src/autoUpdate.ts#L6-L33\n  elementResize: false,\n  animationFrame: false\n};\nexport function autoUpdateFloatingElement(reference, floating, update) {\n  let options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : defaultOptions;\n  const {\n      elementResize = false\n    } = options,\n    restOptions = _object_without_properties(options, [\"elementResize\"]);\n  // eslint-disable-next-line no-restricted-globals, compat/compat\n  const canUseResizeObserver = window.ResizeObserver !== undefined;\n  const autoUpdateLibDisposer = autoUpdateLib(reference, floating, update, _object_spread_props(_object_spread({}, restOptions), {\n    elementResize: elementResize && canUseResizeObserver\n  }));\n  // В случае если `ResizeObserver` будет полифилиться или он будет покрываться нашим `browserlist`, то надо удалить\n  // код с `CustomResizeObserver`.\n  let observer = null;\n  if (elementResize && !canUseResizeObserver) {\n    observer = new CustomResizeObserver(update);\n    if (isHTMLElement(reference)) {\n      observer.observe(reference);\n    }\n    observer.observe(floating);\n    observer.appendToTheDOM();\n  }\n  return () => {\n    if (observer) {\n      observer.disconnect();\n      observer = null;\n    }\n    autoUpdateLibDisposer();\n  };\n}","map":{"version":3,"names":["autoUpdate","autoUpdateLib","isHTMLElement","CustomResizeObserver","useFloating","offset","offsetMiddleware","flip","flipMiddleware","shift","shiftMiddleware","autoPlacement","autoPlacementMiddleware","arrow","arrowMiddleware","size","sizeMiddleware","hide","hideMiddleware","getOverflowAncestors","defaultOptions","ancestorScroll","ancestorResize","elementResize","animationFrame","autoUpdateFloatingElement","reference","floating","update","options","arguments","length","undefined","restOptions","_object_without_properties","canUseResizeObserver","window","ResizeObserver","autoUpdateLibDisposer","_object_spread_props","_object_spread","observer","observe","appendToTheDOM","disconnect"],"sources":["/Users/viktoriaromazanova/PycharmProjects/vk_chatgpt/frontend/node_modules/@vkontakte/vkui/src/lib/floating/adapters.ts"],"sourcesContent":["import {\n  autoUpdate as autoUpdateLib,\n  type AutoUpdateOptions,\n  type FloatingElement,\n  type ReferenceType,\n} from '@vkontakte/vkui-floating-ui/react-dom';\nimport { isHTMLElement } from '../dom';\nimport { CustomResizeObserver } from './customResizeObserver';\n\nexport {\n  useFloating,\n  offset as offsetMiddleware,\n  flip as flipMiddleware,\n  shift as shiftMiddleware,\n  autoPlacement as autoPlacementMiddleware,\n  arrow as arrowMiddleware,\n  size as sizeMiddleware,\n  hide as hideMiddleware,\n  getOverflowAncestors,\n} from '@vkontakte/vkui-floating-ui/react-dom';\n\nexport type { FlipOptions as FlipMiddlewareOptions } from '@vkontakte/vkui-floating-ui/react-dom';\n\nconst defaultOptions = {\n  ancestorScroll: true,\n  ancestorResize: true,\n  // По умолчанию отключаем, т.к. навешивать `CustomResizeObserver` может быть дорого.\n  // В `autoUpdateLib` по умолчанию опция включена. Там используется ResizeObserver, но и он не менее дорогостоящий.\n  // https://github.com/floating-ui/floating-ui/blob/0a34fe9cc2c7483976785a71bd0777cd7c3f2a6a/packages/dom/src/autoUpdate.ts#L6-L33\n  elementResize: false,\n  animationFrame: false,\n};\n\nexport function autoUpdateFloatingElement(\n  reference: ReferenceType,\n  floating: FloatingElement,\n  update: () => void,\n  options: Partial<AutoUpdateOptions> = defaultOptions,\n): ReturnType<typeof autoUpdateLib> {\n  const { elementResize = false, ...restOptions } = options;\n\n  // eslint-disable-next-line no-restricted-globals, compat/compat\n  const canUseResizeObserver = window.ResizeObserver !== undefined;\n  const autoUpdateLibDisposer = autoUpdateLib(reference, floating, update, {\n    ...restOptions,\n    elementResize: elementResize && canUseResizeObserver,\n  });\n\n  // В случае если `ResizeObserver` будет полифилиться или он будет покрываться нашим `browserlist`, то надо удалить\n  // код с `CustomResizeObserver`.\n  let observer: CustomResizeObserver | null = null;\n  if (elementResize && !canUseResizeObserver) {\n    observer = new CustomResizeObserver(update);\n\n    if (isHTMLElement(reference)) {\n      observer.observe(reference);\n    }\n\n    observer.observe(floating);\n\n    observer.appendToTheDOM();\n  }\n\n  return () => {\n    if (observer) {\n      observer.disconnect();\n      observer = null;\n    }\n    autoUpdateLibDisposer();\n  };\n}\n"],"mappings":";;;AAAA,SACEA,UAAA,IAAcC,aAAa,QAItB;AACP,SAASC,aAAa,QAAQ;AAC9B,SAASC,oBAAoB,QAAQ;AAErC,SACEC,WAAW,EACXC,MAAA,IAAUC,gBAAgB,EAC1BC,IAAA,IAAQC,cAAc,EACtBC,KAAA,IAASC,eAAe,EACxBC,aAAA,IAAiBC,uBAAuB,EACxCC,KAAA,IAASC,eAAe,EACxBC,IAAA,IAAQC,cAAc,EACtBC,IAAA,IAAQC,cAAc,EACtBC,oBAAoB,QACf;AAIP,MAAMC,cAAA,GAAiB;EACrBC,cAAA,EAAgB;EAChBC,cAAA,EAAgB;EAChB;EACA;EACA;EACAC,aAAA,EAAe;EACfC,cAAA,EAAgB;AAClB;AAEA,OAAO,SAASC,0BACdC,SAAwB,EACxBC,QAAyB,EACzBC,MAAkB,EACkC;EAAA,IAApDC,OAAA,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAsCV,cAAc;EAEpD,MAAM;MAAEG,aAAA,GAAgB;IAAK,CAAkB,GAAGM,OAAA;IAAhBI,WAAA,GAAAC,0BAAA,CAAgBL,OAAA,GAA1C,gB;EAER;EACA,MAAMM,oBAAA,GAAuBC,MAAA,CAAOC,cAAc,KAAKL,SAAA;EACvD,MAAMM,qBAAA,GAAwBrC,aAAA,CAAcyB,SAAA,EAAWC,QAAA,EAAUC,MAAA,EAAQW,oBAAA,CAAAC,cAAA,KACpEP,WAAA;IACHV,aAAA,EAAeA,aAAA,IAAiBY;;EAGlC;EACA;EACA,IAAIM,QAAA,GAAwC;EAC5C,IAAIlB,aAAA,IAAiB,CAACY,oBAAA,EAAsB;IAC1CM,QAAA,GAAW,IAAItC,oBAAA,CAAqByB,MAAA;IAEpC,IAAI1B,aAAA,CAAcwB,SAAA,GAAY;MAC5Be,QAAA,CAASC,OAAO,CAAChB,SAAA;IACnB;IAEAe,QAAA,CAASC,OAAO,CAACf,QAAA;IAEjBc,QAAA,CAASE,cAAc;EACzB;EAEA,OAAO;IACL,IAAIF,QAAA,EAAU;MACZA,QAAA,CAASG,UAAU;MACnBH,QAAA,GAAW;IACb;IACAH,qBAAA;EACF;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}