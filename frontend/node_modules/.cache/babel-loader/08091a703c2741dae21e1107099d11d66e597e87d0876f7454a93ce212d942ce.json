{"ast":null,"code":"'use client';\n\nimport { _ as _object_spread } from \"@swc/helpers/_/_object_spread\";\nimport { _ as _object_spread_props } from \"@swc/helpers/_/_object_spread_props\";\nimport { _ as _object_without_properties } from \"@swc/helpers/_/_object_without_properties\";\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport * as React from \"react\";\nimport { classNames } from \"@vkontakte/vkjs\";\nimport { useAdaptivity } from \"../../hooks/useAdaptivity.js\";\nimport { useGlobalOnClickOutside } from \"../../hooks/useGlobalOnClickOutside.js\";\nimport { usePlatform } from \"../../hooks/usePlatform.js\";\nimport { useCSSKeyframesAnimationController } from \"../../lib/animation/index.js\";\nimport { useScrollLock } from \"../AppRoot/ScrollContext.js\";\nimport { FixedLayout } from \"../FixedLayout/FixedLayout.js\";\nconst sizeXClassNames = {\n  none: \"vkuiPanelHeaderContext__sizeXNone\",\n  compact: \"vkuiPanelHeaderContext__sizeXCompact\",\n  regular: \"vkuiPanelHeaderContext__sizeXRegular\"\n};\n/**\n * @see https://vkcom.github.io/VKUI/#/PanelHeaderContext\n */\nexport const PanelHeaderContext = _param => {\n  var {\n      children,\n      opened = false,\n      className,\n      onClose\n    } = _param,\n    restProps = _object_without_properties(_param, [\"children\", \"opened\", \"className\", \"onClose\"]);\n  const platform = usePlatform();\n  const {\n    sizeX = 'none'\n  } = useAdaptivity();\n  const elementRef = React.useRef(null);\n  const [animationState, animationHandlers] = useCSSKeyframesAnimationController(opened ? 'enter' : 'exit', undefined, true);\n  const visible = animationState !== 'exited';\n  useScrollLock(platform !== 'vkcom' && visible);\n  const handleGlobalOnClickOutside = React.useCallback(event => {\n    if (opened) {\n      event.stopPropagation();\n      onClose();\n    }\n  }, [opened, onClose]);\n  useGlobalOnClickOutside(handleGlobalOnClickOutside, visible ? elementRef : null);\n  if (!visible) {\n    return null;\n  }\n  return /*#__PURE__*/_jsxs(FixedLayout, _object_spread_props(_object_spread({}, restProps), {\n    className: classNames(\"vkuiPanelHeaderContext__host\", platform === 'ios' && \"vkuiPanelHeaderContext__ios\", opened ? \"vkuiPanelHeaderContext__opened\" : \"vkuiPanelHeaderContext__closing\", sizeXClassNames[sizeX], className),\n    vertical: \"top\",\n    children: [/*#__PURE__*/_jsx(\"div\", {\n      onClick: event => {\n        event.stopPropagation();\n        onClose();\n      },\n      className: \"vkuiPanelHeaderContext__fade\"\n    }), /*#__PURE__*/_jsx(\"div\", _object_spread_props(_object_spread({\n      \"data-testid\": process.env.NODE_ENV === 'test' ? 'content' : undefined,\n      className: \"vkuiPanelHeaderContext__in\",\n      ref: elementRef\n    }, animationHandlers), {\n      children: /*#__PURE__*/_jsx(\"div\", {\n        className: \"vkuiPanelHeaderContext__content\",\n        children: children\n      })\n    }))]\n  }));\n};","map":{"version":3,"names":["React","classNames","useAdaptivity","useGlobalOnClickOutside","usePlatform","useCSSKeyframesAnimationController","useScrollLock","FixedLayout","sizeXClassNames","none","compact","regular","PanelHeaderContext","_param","children","opened","className","onClose","restProps","_object_without_properties","platform","sizeX","elementRef","useRef","animationState","animationHandlers","undefined","visible","handleGlobalOnClickOutside","useCallback","event","stopPropagation","_jsxs","_object_spread_props","_object_spread","vertical","_jsx","onClick","process","env","NODE_ENV","ref"],"sources":["/Users/viktoriaromazanova/PycharmProjects/vk_chatgpt/frontend/node_modules/@vkontakte/vkui/src/components/PanelHeaderContext/PanelHeaderContext.tsx"],"sourcesContent":["'use client';\n\nimport * as React from 'react';\nimport { classNames } from '@vkontakte/vkjs';\nimport { useAdaptivity } from '../../hooks/useAdaptivity';\nimport { useGlobalOnClickOutside } from '../../hooks/useGlobalOnClickOutside';\nimport { usePlatform } from '../../hooks/usePlatform';\nimport { useCSSKeyframesAnimationController } from '../../lib/animation';\nimport type { HTMLAttributesWithRootRef } from '../../types';\nimport { useScrollLock } from '../AppRoot/ScrollContext';\nimport { FixedLayout } from '../FixedLayout/FixedLayout';\nimport styles from './PanelHeaderContext.module.css';\n\nconst sizeXClassNames = {\n  none: styles.sizeXNone,\n  compact: styles.sizeXCompact,\n  regular: styles.sizeXRegular,\n};\n\nexport interface PanelHeaderContextProps extends HTMLAttributesWithRootRef<HTMLDivElement> {\n  opened: boolean;\n  onClose: VoidFunction;\n}\n\n/**\n * @see https://vkcom.github.io/VKUI/#/PanelHeaderContext\n */\nexport const PanelHeaderContext = ({\n  children,\n  opened = false,\n  className,\n  onClose,\n  ...restProps\n}: PanelHeaderContextProps): React.ReactNode => {\n  const platform = usePlatform();\n  const { sizeX = 'none' } = useAdaptivity();\n  const elementRef = React.useRef<HTMLDivElement>(null);\n  const [animationState, animationHandlers] = useCSSKeyframesAnimationController(\n    opened ? 'enter' : 'exit',\n    undefined,\n    true,\n  );\n  const visible = animationState !== 'exited';\n\n  useScrollLock(platform !== 'vkcom' && visible);\n\n  const handleGlobalOnClickOutside = React.useCallback(\n    (event: MouseEvent) => {\n      if (opened) {\n        event.stopPropagation();\n        onClose();\n      }\n    },\n    [opened, onClose],\n  );\n\n  useGlobalOnClickOutside(handleGlobalOnClickOutside, visible ? elementRef : null);\n\n  if (!visible) {\n    return null;\n  }\n\n  return (\n    <FixedLayout\n      {...restProps}\n      className={classNames(\n        styles.host,\n        platform === 'ios' && styles.ios,\n        opened ? styles.opened : styles.closing,\n        sizeXClassNames[sizeX],\n        className,\n      )}\n      vertical=\"top\"\n    >\n      <div\n        onClick={(event) => {\n          event.stopPropagation();\n          onClose();\n        }}\n        className={styles.fade}\n      />\n      <div\n        data-testid={process.env.NODE_ENV === 'test' ? 'content' : undefined}\n        className={styles.in}\n        ref={elementRef}\n        {...animationHandlers}\n      >\n        <div className={styles.content}>{children}</div>\n      </div>\n    </FixedLayout>\n  );\n};\n"],"mappings":"AAAA;;;;;;AAEA,YAAYA,KAAA,MAAW;AACvB,SAASC,UAAU,QAAQ;AAC3B,SAASC,aAAa,QAAQ;AAC9B,SAASC,uBAAuB,QAAQ;AACxC,SAASC,WAAW,QAAQ;AAC5B,SAASC,kCAAkC,QAAQ;AAEnD,SAASC,aAAa,QAAQ;AAC9B,SAASC,WAAW,QAAQ;AAG5B,MAAMC,eAAA,GAAkB;EACtBC,IAAI;EACJC,OAAO;EACPC,OAAO;AACT;AAOA;;;AAGA,OAAO,MAAMC,kBAAA,GAAqBC,MAAA;MAAC;MACjCC,QAAQ;MACRC,MAAA,GAAS,KAAK;MACdC,SAAS;MACTC;IAAO,CAEiB,GAAAJ,MAAA;IADrBK,SAAA,GAAAC,0BAAA,CAAAN,MAAA,GAJH,YACA,UACA,aACA,U;EAGA,MAAMO,QAAA,GAAWhB,WAAA;EACjB,MAAM;IAAEiB,KAAA,GAAQ;EAAM,CAAE,GAAGnB,aAAA;EAC3B,MAAMoB,UAAA,GAAatB,KAAA,CAAMuB,MAAM,CAAiB;EAChD,MAAM,CAACC,cAAA,EAAgBC,iBAAA,CAAkB,GAAGpB,kCAAA,CAC1CU,MAAA,GAAS,UAAU,QACnBW,SAAA,EACA;EAEF,MAAMC,OAAA,GAAUH,cAAA,KAAmB;EAEnClB,aAAA,CAAcc,QAAA,KAAa,WAAWO,OAAA;EAEtC,MAAMC,0BAAA,GAA6B5B,KAAA,CAAM6B,WAAW,CACjDC,KAAA;IACC,IAAIf,MAAA,EAAQ;MACVe,KAAA,CAAMC,eAAe;MACrBd,OAAA;IACF;EACF,GACA,CAACF,MAAA,EAAQE,OAAA,CAAQ;EAGnBd,uBAAA,CAAwByB,0BAAA,EAA4BD,OAAA,GAAUL,UAAA,GAAa;EAE3E,IAAI,CAACK,OAAA,EAAS;IACZ,OAAO;EACT;EAEA,oBACEK,KAAA,CAACzB,WAAA,EAAA0B,oBAAA,CAAAC,cAAA,KACKhB,SAAA;IACJF,SAAA,EAAWf,UAAA,iCAETmB,QAAA,KAAa,wCACbL,MAAA,yEACAP,eAAe,CAACa,KAAA,CAAM,EACtBL,SAAA;IAEFmB,QAAA,EAAS;4BAETC,IAAA,CAAC;MACCC,OAAA,EAAUP,KAAA;QACRA,KAAA,CAAMC,eAAe;QACrBd,OAAA;MACF;MACAD,SAAS;qBAEXoB,IAAA,CAAC,OAAAH,oBAAA,CAAAC,cAAA;MACC,eAAaI,OAAA,CAAQC,GAAG,CAACC,QAAQ,KAAK,SAAS,YAAYd,SAAA;MAC3DV,SAAS;MACTyB,GAAA,EAAKnB;OACDG,iBAAA;gBAEJ,aAAAW,IAAA,CAAC;QAAIpB,SAAS;kBAAmBF;;;;AAIzC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}