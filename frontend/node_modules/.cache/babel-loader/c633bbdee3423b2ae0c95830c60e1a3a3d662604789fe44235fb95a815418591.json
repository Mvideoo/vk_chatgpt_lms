{"ast":null,"code":"'use client';\n\nimport { _ as _object_spread } from \"@swc/helpers/_/_object_spread\";\nimport { _ as _object_spread_props } from \"@swc/helpers/_/_object_spread_props\";\nimport { _ as _object_without_properties } from \"@swc/helpers/_/_object_without_properties\";\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport * as React from \"react\";\nimport { mergeStyle } from \"../../helpers/mergeStyle.js\";\nimport { useExternRef } from \"../../hooks/useExternRef.js\";\nimport { autoUpdateFloatingElement, convertFloatingDataToReactCSSProperties, useFloating, useFloatingMiddlewaresBootstrap, usePlacementChangeCallback } from \"../../lib/floating/index.js\";\nimport { useReferenceHiddenChangeCallback } from \"../../lib/floating/useReferenceHiddenChangeCallback.js\";\nimport { useIsomorphicLayoutEffect } from \"../../lib/useIsomorphicLayoutEffect.js\";\nimport { AppRootPortal } from \"../AppRoot/AppRootPortal.js\";\nimport { DEFAULT_ARROW_HEIGHT, DEFAULT_ARROW_PADDING, DefaultIcon } from \"../FloatingArrow/DefaultIcon.js\";\nimport { FloatingArrow } from \"../FloatingArrow/FloatingArrow.js\";\nimport { RootComponent } from \"../RootComponent/RootComponent.js\";\n/**\n * @see https://vkcom.github.io/VKUI/#/Popper\n */\nexport const Popper = _param => {\n  var {\n      // UseFloatingMiddlewaresBootstrapProps\n      placement: placementProp = 'bottom-start',\n      sameWidth,\n      hideWhenReferenceHidden,\n      offsetByMainAxis = 8,\n      offsetByCrossAxis = 0,\n      arrow,\n      arrowHeight = DEFAULT_ARROW_HEIGHT,\n      arrowPadding = DEFAULT_ARROW_PADDING,\n      customMiddlewares,\n      disableFlipMiddleware = false,\n      flipMiddlewareFallbackAxisSideDirection,\n      // UseFloatingProps\n      autoUpdateOnTargetResize = false,\n      strategy: strategyProp,\n      // ArrowProps\n      arrowProps,\n      ArrowIcon = DefaultIcon,\n      // rest\n      targetRef,\n      getRootRef,\n      children,\n      usePortal = true,\n      onPlacementChange,\n      onReferenceHiddenChange,\n      zIndex,\n      style\n    } = _param,\n    restProps = _object_without_properties(_param, [\"placement\", \"sameWidth\", \"hideWhenReferenceHidden\", \"offsetByMainAxis\", \"offsetByCrossAxis\", \"arrow\", \"arrowHeight\", \"arrowPadding\", \"customMiddlewares\", \"disableFlipMiddleware\", \"flipMiddlewareFallbackAxisSideDirection\", \"autoUpdateOnTargetResize\", \"strategy\", \"arrowProps\", \"ArrowIcon\", \"targetRef\", \"getRootRef\", \"children\", \"usePortal\", \"onPlacementChange\", \"onReferenceHiddenChange\", \"zIndex\", \"style\"]);\n  const [arrowRef, setArrowRef] = React.useState(null);\n  const {\n    strictPlacement,\n    middlewares\n  } = useFloatingMiddlewaresBootstrap({\n    placement: placementProp,\n    sameWidth,\n    arrow,\n    arrowRef,\n    arrowHeight,\n    arrowPadding,\n    offsetByMainAxis,\n    offsetByCrossAxis,\n    hideWhenReferenceHidden,\n    customMiddlewares,\n    disableFlipMiddleware,\n    flipMiddlewareFallbackAxisSideDirection\n  });\n  const {\n    x: floatingDataX,\n    y: floatingDataY,\n    strategy: floatingPositionStrategy,\n    placement: resolvedPlacement,\n    refs,\n    middlewareData\n  } = useFloating({\n    placement: strictPlacement,\n    strategy: strategyProp,\n    middleware: middlewares,\n    whileElementsMounted() {\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n      /* istanbul ignore next: не знаю как проверить */return autoUpdateFloatingElement(...args, {\n        elementResize: autoUpdateOnTargetResize\n      });\n    }\n  });\n  usePlacementChangeCallback(placementProp, resolvedPlacement, onPlacementChange);\n  useReferenceHiddenChangeCallback(middlewareData.hide, onReferenceHiddenChange);\n  const {\n    arrow: arrowCoords\n  } = middlewareData;\n  const handleRootRef = useExternRef(refs.setFloating, getRootRef);\n  useIsomorphicLayoutEffect(() => {\n    refs.setReference('current' in targetRef ? targetRef.current : targetRef);\n  }, [refs.setReference, targetRef]);\n  const dropdownStyle = typeof zIndex !== 'undefined' ? {\n    zIndex\n  } : undefined;\n  const dropdown = /*#__PURE__*/_jsxs(RootComponent, _object_spread_props(_object_spread({}, restProps), {\n    style: mergeStyle(dropdownStyle, style),\n    baseClassName: \"vkuiPopper__host\",\n    getRootRef: handleRootRef,\n    baseStyle: convertFloatingDataToReactCSSProperties({\n      strategy: floatingPositionStrategy,\n      x: floatingDataX,\n      y: floatingDataY,\n      initialWidth: sameWidth ? null : undefined,\n      middlewareData\n    }),\n    children: [arrow && /*#__PURE__*/_jsx(FloatingArrow, _object_spread_props(_object_spread({}, arrowProps), {\n      coords: arrowCoords,\n      placement: resolvedPlacement,\n      getRootRef: setArrowRef,\n      Icon: ArrowIcon\n    })), children]\n  }));\n  return /*#__PURE__*/_jsx(AppRootPortal, {\n    usePortal: usePortal,\n    children: dropdown\n  });\n};","map":{"version":3,"names":["React","mergeStyle","useExternRef","autoUpdateFloatingElement","convertFloatingDataToReactCSSProperties","useFloating","useFloatingMiddlewaresBootstrap","usePlacementChangeCallback","useReferenceHiddenChangeCallback","useIsomorphicLayoutEffect","AppRootPortal","DEFAULT_ARROW_HEIGHT","DEFAULT_ARROW_PADDING","DefaultIcon","FloatingArrow","RootComponent","Popper","_param","placement","placementProp","sameWidth","hideWhenReferenceHidden","offsetByMainAxis","offsetByCrossAxis","arrow","arrowHeight","arrowPadding","customMiddlewares","disableFlipMiddleware","flipMiddlewareFallbackAxisSideDirection","autoUpdateOnTargetResize","strategy","strategyProp","arrowProps","ArrowIcon","targetRef","getRootRef","children","usePortal","onPlacementChange","onReferenceHiddenChange","zIndex","style","restProps","_object_without_properties","arrowRef","setArrowRef","useState","strictPlacement","middlewares","x","floatingDataX","y","floatingDataY","floatingPositionStrategy","resolvedPlacement","refs","middlewareData","middleware","whileElementsMounted","_len","arguments","length","args","Array","_key","elementResize","hide","arrowCoords","handleRootRef","setFloating","setReference","current","dropdownStyle","undefined","dropdown","_jsxs","_object_spread_props","_object_spread","baseClassName","baseStyle","initialWidth","_jsx","coords","Icon"],"sources":["/Users/viktoriaromazanova/PycharmProjects/vk_chatgpt/frontend/node_modules/@vkontakte/vkui/src/components/Popper/Popper.tsx"],"sourcesContent":["'use client';\n\nimport * as React from 'react';\nimport { mergeStyle } from '../../helpers/mergeStyle';\nimport { useExternRef } from '../../hooks/useExternRef';\nimport {\n  autoUpdateFloatingElement,\n  convertFloatingDataToReactCSSProperties,\n  type FloatingComponentProps,\n  useFloating,\n  useFloatingMiddlewaresBootstrap,\n  usePlacementChangeCallback,\n  type VirtualElement,\n} from '../../lib/floating';\nimport { useReferenceHiddenChangeCallback } from '../../lib/floating/useReferenceHiddenChangeCallback';\nimport { useIsomorphicLayoutEffect } from '../../lib/useIsomorphicLayoutEffect';\nimport type { HTMLAttributesWithRootRef } from '../../types';\nimport { AppRootPortal } from '../AppRoot/AppRootPortal';\nimport {\n  DEFAULT_ARROW_HEIGHT,\n  DEFAULT_ARROW_PADDING,\n  DefaultIcon,\n} from '../FloatingArrow/DefaultIcon';\nimport {\n  FloatingArrow,\n  type FloatingArrowProps as FloatingArrowPropsPrivate,\n} from '../FloatingArrow/FloatingArrow';\nimport { RootComponent } from '../RootComponent/RootComponent';\nimport styles from './Popper.module.css';\n\nexport type FloatingArrowProps = Omit<\n  FloatingArrowPropsPrivate,\n  'getRootRef' | 'coords' | 'placement' | 'Icon'\n>;\n\ntype AllowedFloatingComponentProps = Pick<\n  FloatingComponentProps,\n  | 'arrow'\n  | 'arrowRef'\n  | 'arrowHeight'\n  | 'arrowPadding'\n  | 'hoverDelay'\n  | 'placement'\n  | 'offsetByMainAxis'\n  | 'offsetByCrossAxis'\n  | 'shown'\n  | 'onShownChange'\n  | 'defaultShown'\n  | 'hideWhenReferenceHidden'\n  | 'onReferenceHiddenChange'\n  | 'sameWidth'\n  | 'zIndex'\n  | 'strategy'\n  | 'usePortal'\n  | 'customMiddlewares'\n  | 'onPlacementChange'\n  | 'disableFlipMiddleware'\n  | 'flipMiddlewareFallbackAxisSideDirection'\n>;\n\nexport interface PopperCommonProps\n  extends AllowedFloatingComponentProps,\n    Omit<HTMLAttributesWithRootRef<HTMLDivElement>, keyof AllowedFloatingComponentProps> {\n  /**\n   * Позволяет набросить на стрелку пользовательские атрибуты.\n   */\n  arrowProps?: FloatingArrowProps;\n  /**\n   * Пользовательская SVG иконка.\n   *\n   * Требования:\n   *\n   * 1. Иконка по умолчанию должна быть направлена вверх (a.k.a `IconUp`).\n   * 2. Чтобы избежать проблемы с пространством между стрелкой и контентом на некоторых экранах,\n   *    растяните кривую по высоте на `1px` и увеличьте на этот размер `height` и `viewBox` SVG.\n   *    (см. https://github.com/VKCOM/VKUI/pull/4496).\n   * 3. Передайте высоту иконки в параметр `arrowHeight`. В значении высоты можно исключить хак с `1px` из п.2.\n   * 4. Убедитесь, что компонент принимает все валидные для SVG параметры.\n   * 5. Убедитесь, что SVG и её элементы наследует цвет через `fill=\"currentColor\"`.\n   */\n  ArrowIcon?: FloatingArrowPropsPrivate['Icon'];\n  /**\n   * Подписывается на изменение геометрии `targetRef`, чтобы пересчитать свою позицию.\n   */\n  autoUpdateOnTargetResize?: boolean;\n}\n\nexport interface PopperProps extends PopperCommonProps {\n  targetRef: React.RefObject<HTMLElement | null> | VirtualElement;\n}\n\n/**\n * @see https://vkcom.github.io/VKUI/#/Popper\n */\nexport const Popper = ({\n  // UseFloatingMiddlewaresBootstrapProps\n  placement: placementProp = 'bottom-start',\n  sameWidth,\n  hideWhenReferenceHidden,\n  offsetByMainAxis = 8,\n  offsetByCrossAxis = 0,\n  arrow,\n  arrowHeight = DEFAULT_ARROW_HEIGHT,\n  arrowPadding = DEFAULT_ARROW_PADDING,\n  customMiddlewares,\n  disableFlipMiddleware = false,\n  flipMiddlewareFallbackAxisSideDirection,\n\n  // UseFloatingProps\n  autoUpdateOnTargetResize = false,\n  strategy: strategyProp,\n\n  // ArrowProps\n  arrowProps,\n  ArrowIcon = DefaultIcon,\n\n  // rest\n  targetRef,\n  getRootRef,\n  children,\n  usePortal = true,\n  onPlacementChange,\n  onReferenceHiddenChange,\n  zIndex,\n  style,\n  ...restProps\n}: PopperProps): React.ReactNode => {\n  const [arrowRef, setArrowRef] = React.useState<HTMLDivElement | null>(null);\n\n  const { strictPlacement, middlewares } = useFloatingMiddlewaresBootstrap({\n    placement: placementProp,\n    sameWidth,\n    arrow,\n    arrowRef,\n    arrowHeight,\n    arrowPadding,\n    offsetByMainAxis,\n    offsetByCrossAxis,\n    hideWhenReferenceHidden,\n    customMiddlewares,\n    disableFlipMiddleware,\n    flipMiddlewareFallbackAxisSideDirection,\n  });\n\n  const {\n    x: floatingDataX,\n    y: floatingDataY,\n    strategy: floatingPositionStrategy,\n    placement: resolvedPlacement,\n    refs,\n    middlewareData,\n  } = useFloating({\n    placement: strictPlacement,\n    strategy: strategyProp,\n    middleware: middlewares,\n    whileElementsMounted(...args) {\n      /* istanbul ignore next: не знаю как проверить */\n      return autoUpdateFloatingElement(...args, {\n        elementResize: autoUpdateOnTargetResize,\n      });\n    },\n  });\n\n  usePlacementChangeCallback(placementProp, resolvedPlacement, onPlacementChange);\n\n  useReferenceHiddenChangeCallback(middlewareData.hide, onReferenceHiddenChange);\n\n  const { arrow: arrowCoords } = middlewareData;\n\n  const handleRootRef = useExternRef<HTMLDivElement>(refs.setFloating, getRootRef);\n\n  useIsomorphicLayoutEffect(() => {\n    refs.setReference('current' in targetRef ? targetRef.current : targetRef);\n  }, [refs.setReference, targetRef]);\n\n  const dropdownStyle =\n    typeof zIndex !== 'undefined'\n      ? {\n          zIndex,\n        }\n      : undefined;\n\n  const dropdown = (\n    <RootComponent\n      {...restProps}\n      style={mergeStyle(dropdownStyle, style)}\n      baseClassName={styles.host}\n      getRootRef={handleRootRef}\n      baseStyle={convertFloatingDataToReactCSSProperties({\n        strategy: floatingPositionStrategy,\n        x: floatingDataX,\n        y: floatingDataY,\n        initialWidth: sameWidth ? null : undefined,\n        middlewareData,\n      })}\n    >\n      {arrow && (\n        <FloatingArrow\n          {...arrowProps}\n          coords={arrowCoords}\n          placement={resolvedPlacement}\n          getRootRef={setArrowRef}\n          Icon={ArrowIcon}\n        />\n      )}\n      {children}\n    </RootComponent>\n  );\n\n  return <AppRootPortal usePortal={usePortal}>{dropdown}</AppRootPortal>;\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}