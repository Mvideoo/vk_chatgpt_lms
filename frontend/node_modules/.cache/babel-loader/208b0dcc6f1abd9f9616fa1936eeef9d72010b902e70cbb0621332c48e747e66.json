{"ast":null,"code":"import React,{useState,useEffect,useRef}from'react';import{AdaptivityProvider,AppRoot,Button,ConfigProvider,Div,Panel,Textarea,SplitCol,SplitLayout,View}from'@vkontakte/vkui';import'@vkontakte/vkui/dist/vkui.css';import{FixedLayout}from'@vkontakte/vkui';import{motion,AnimatePresence}from'framer-motion';import bridge from'@vkontakte/vk-bridge';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const questions=['Что тебе ближе — решать сложные задачи в одиночестве или помогать другим справляться с трудностями?','Любишь ли ты точность и технические детали, или тебе ближе творчество и воображение?','Как ты реагируешь в экстремальных ситуациях: действуешь хладнокровно, срываешься на эмоции или берёшь на себя заботу о других?','Что тебя вдохновляет больше — слова, которые могут изменить мышление, или поступки, которые меняют жизнь?','Есть ли у тебя тяга к заботе о здоровье — своём и окружающих — или тебя больше влечёт работа руками, с механизмами и конструкциями?','Ты больше мечтатель, стратег, мастер дела или защитник слабых?'];const App=()=>{const[activePanel,setActivePanel]=useState('intro');const[currentQuestionIndex,setCurrentQuestionIndex]=useState(0);const[messages,setMessages]=useState([]);const[answers,setAnswers]=useState([]);const[input,setInput]=useState('');const[loading,setLoading]=useState(false);const[finished,setFinished]=useState(false);const[characterImage,setCharacterImage]=useState(null);const[fontsLoaded,setFontsLoaded]=useState(false);const messagesEndRef=useRef(null);// Минимальное время ожидания экрана загрузки (в мс)\nconst MIN_LOADING_TIME=4500;const[loadingStartTime]=useState(Date.now());// Ожидание загрузки всех шрифтов с учетом минимальной задержки\nuseEffect(()=>{document.fonts.ready.then(()=>{const elapsed=Date.now()-loadingStartTime;const delay=Math.max(0,MIN_LOADING_TIME-elapsed);setTimeout(()=>setFontsLoaded(true),delay);});},[loadingStartTime]);useEffect(()=>{const setVH=()=>document.documentElement.style.setProperty('--vh',`${window.innerHeight*0.01}px`);setVH();window.addEventListener('resize',setVH);return()=>window.removeEventListener('resize',setVH);},[]);// Определяем, поддерживает ли устройство сенсорный ввод (для автоскролла)\nconst isTouchDevice='ontouchstart'in window||navigator.maxTouchPoints>0;const[viewportHeight,setViewportHeight]=useState(window.innerHeight);useEffect(()=>{const handleResize=()=>{setViewportHeight(window.innerHeight);};window.addEventListener('resize',handleResize);return()=>window.removeEventListener('resize',handleResize);},[]);useEffect(()=>{/** сразу запрашиваем актуальные инкрусты */bridge.send('VKWebAppGetConfig');/** слушаем дальнейшие изменения (например, появление клавиатуры) */const cb=_ref=>{var _data$insets;let{detail:{type,data}}=_ref;if(type==='VKWebAppUpdateConfig'&&(data===null||data===void 0?void 0:(_data$insets=data.insets)===null||_data$insets===void 0?void 0:_data$insets.bottom)!==undefined){document.documentElement.style.setProperty('--vk-safe-bottom',`${data.insets.bottom}px`);}};bridge.subscribe(cb);return()=>bridge.unsubscribe(cb);},[]);// Эффект для автоскролла в конец чата (только для сенсорных устройств)\nuseEffect(()=>{if(isTouchDevice&&messagesEndRef.current){messagesEndRef.current.scrollIntoView({behavior:'smooth',block:'end'});}},[messages,isTouchDevice,viewportHeight]);useEffect(()=>{if(activePanel==='chat'&&messages.length===0){setMessages([{text:questions[0],from:'gpt',key:Date.now()}]);}},[activePanel,messages.length]);const sendAnswer=async()=>{if(!input.trim())return;const answerText=input.trim();const questionText=questions[currentQuestionIndex];const userMessage={text:answerText,from:'user',key:Date.now()};const updatedAnswers=[...answers,{question:questionText,answer:answerText}];setMessages(prev=>[...prev,userMessage]);setAnswers(updatedAnswers);setInput('');setLoading(true);const nextIndex=currentQuestionIndex+1;if(nextIndex<questions.length){setTimeout(()=>{const nextMessage={text:questions[nextIndex],from:'gpt',key:Date.now()};setMessages(prev=>[...prev,nextMessage]);setCurrentQuestionIndex(nextIndex);setLoading(false);},700);}else{setFinished(true);try{const res=await fetch('https://dc9910de271be81df62e5d86f21b4a27.serveo.net/chat/send',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({user_id:'vk_user',username:'vk_user',answers:updatedAnswers})});const data=await res.json();const imageUrl=data.image_url;setCharacterImage(imageUrl);setMessages(prev=>[...prev,{text:'Вы похожи на...',from:'gpt',key:Date.now()}]);}catch(error){setMessages(prev=>[...prev,{text:'Хм... Попробуйте еще раз!',from:'gpt',key:Date.now()}]);}setLoading(false);}};const renderMessages=()=>/*#__PURE__*/_jsxs(Div,{children:[/*#__PURE__*/_jsx(AnimatePresence,{initial:false,children:messages.map(msg=>/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},transition:{duration:0.3},style:{display:'flex',justifyContent:msg.from==='user'?'flex-end':'flex-start',marginBottom:10},children:/*#__PURE__*/_jsx(\"div\",{style:{background:msg.from==='user'?'#f0e8dd':'#e3d5c4',color:'#1c1c1c',padding:'10px 14px',borderRadius:'16px',display:'inline-block',maxWidth:'75%',wordBreak:'break-word'},children:msg.text})},msg.key))}),/*#__PURE__*/_jsx(\"div\",{ref:messagesEndRef})]});// Отображаем экран загрузки, пока не загружены все шрифты\nif(!fontsLoaded){return/*#__PURE__*/_jsx(\"div\",{style:{position:'fixed',top:0,left:0,width:'100vw',height:'100vh',backgroundColor:'#FDF7F0',display:'flex',alignItems:'center',justifyContent:'center',zIndex:9999},children:/*#__PURE__*/_jsx(\"div\",{className:\"loader\"})});}return/*#__PURE__*/_jsx(ConfigProvider,{children:/*#__PURE__*/_jsx(AdaptivityProvider,{children:/*#__PURE__*/_jsx(\"div\",{style:{width:'100%',height:'100%',overflow:'hidden',backgroundColor:'#FDF7F0'},children:/*#__PURE__*/_jsx(AppRoot,{children:/*#__PURE__*/_jsx(SplitLayout,{style:{width:'100%',height:'100%'},children:/*#__PURE__*/_jsx(SplitCol,{style:{width:'100%',height:'100%'},children:/*#__PURE__*/_jsxs(View,{activePanel:activePanel,children:[/*#__PURE__*/_jsx(Panel,{id:\"intro\",children:/*#__PURE__*/_jsxs(Div,{style:{display:'flex',flexDirection:'column',justifyContent:'space-between',height:'100vh',padding:0,backgroundColor:'#fdf7f0'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{position:'relative'},children:[/*#__PURE__*/_jsx(\"img\",{src:\"https://i.pinimg.com/736x/01/90/d6/0190d61dbacf5e04320ca41c47da3d6c.jpg\",alt:\"\\u0412\\u0434\\u043E\\u0445\\u043D\\u043E\\u0432\\u0438\\u0442\\u0435\\u043B\\u0438\",style:{width:'100%',objectFit:'cover',maxHeight:'200px'}}),/*#__PURE__*/_jsxs(\"div\",{style:{position:'absolute',top:'20%',left:'10%',color:'#254E2E',fontFamily:'Anticva',fontSize:'20px',fontWeight:'bold'},children:[\"\\u0411\\u041B\\u0410\\u0413\\u041E \\u041E\\u0411\\u0429\\u0415\\u0415 \",/*#__PURE__*/_jsx(\"br\",{}),\" \\u0412\\u042B\\u0428\\u0415 \\u041C\\u041E\\u0415\\u0413\\u041E\"]})]}),/*#__PURE__*/_jsxs(Div,{style:{padding:'20px',background:'#ffffff',borderRadius:'12px',boxShadow:'0px 6px 12px rgba(0, 0, 0, 0.1)'},children:[/*#__PURE__*/_jsxs(\"p\",{style:{color:'#6C828D',fontFamily:'CodeNext',lineHeight:'1.6'},children:[\"\\u0414\\u043E\\u0431\\u0440\\u043E \\u043F\\u043E\\u0436\\u0430\\u043B\\u043E\\u0432\\u0430\\u0442\\u044C \\u0432 \\u043F\\u0440\\u0438\\u043B\\u043E\\u0436\\u0435\\u043D\\u0438\\u0435 \",/*#__PURE__*/_jsx(\"strong\",{children:\"\\xAB\\u041A\\u0442\\u043E \\u0442\\u044B \\u0438\\u0437 \\u0433\\u0435\\u0440\\u043E\\u0435\\u0432 \\u043F\\u0440\\u043E\\u0448\\u043B\\u043E\\u0433\\u043E?\\xBB\"}),\" \\u2014 \\u0447\\u0430\\u0441\\u0442\\u044C \\u043F\\u0440\\u043E\\u0435\\u043A\\u0442\\u0430 \",/*#__PURE__*/_jsx(\"strong\",{children:\"\\xAB\\u0412\\u0434\\u043E\\u0445\\u043D\\u043E\\u0432\\u0438\\u0442\\u0435\\u043B\\u0438\\xBB\"}),\".\"]}),/*#__PURE__*/_jsx(\"p\",{style:{color:'#6C828D',fontFamily:'CodeNext',lineHeight:'1.6'},children:\"\\u042D\\u0442\\u043E\\u0442 \\u0441\\u0435\\u0440\\u0432\\u0438\\u0441 \\u0441\\u043E\\u0437\\u0434\\u0430\\u043D, \\u0447\\u0442\\u043E\\u0431\\u044B \\u043A\\u0430\\u0436\\u0434\\u044B\\u0439 \\u043C\\u043E\\u0433 \\u043F\\u043E\\u0447\\u0443\\u0432\\u0441\\u0442\\u0432\\u043E\\u0432\\u0430\\u0442\\u044C \\u043B\\u0438\\u0447\\u043D\\u0443\\u044E \\u0441\\u0432\\u044F\\u0437\\u044C \\u0441 \\u0438\\u0441\\u0442\\u043E\\u0440\\u0438\\u0435\\u0439 \\u0412\\u0435\\u043B\\u0438\\u043A\\u043E\\u0439 \\u041E\\u0442\\u0435\\u0447\\u0435\\u0441\\u0442\\u0432\\u0435\\u043D\\u043D\\u043E\\u0439 \\u0432\\u043E\\u0439\\u043D\\u044B.\"}),/*#__PURE__*/_jsxs(\"p\",{style:{color:'#6C828D',fontFamily:'CodeNext',lineHeight:'1.6'},children:[\"\\u041E\\u0442\\u0432\\u0435\\u0447\\u0430\\u0439 \\u043D\\u0430 \\u0432\\u043E\\u043F\\u0440\\u043E\\u0441\\u044B, \\u0440\\u0430\\u0441\\u0441\\u043A\\u0430\\u0437\\u044B\\u0432\\u0430\\u044F \\u043E \\u0441\\u0435\\u0431\\u0435 \\u2014 \\u0441\\u0432\\u043E\\u0431\\u043E\\u0434\\u043D\\u043E \\u0438 \\u0438\\u0441\\u043A\\u0440\\u0435\\u043D\\u043D\\u0435.\",/*#__PURE__*/_jsx(\"br\",{}),\"\\u041F\\u043E\\u0441\\u043B\\u0435 \\u044D\\u0442\\u043E\\u0433\\u043E \\u0442\\u044B \\u0443\\u0437\\u043D\\u0430\\u0435\\u0448\\u044C, \\u043D\\u0430 \\u043A\\u043E\\u0433\\u043E \\u0438\\u0437 \\u0433\\u0435\\u0440\\u043E\\u0435\\u0432 \\u043F\\u0440\\u043E\\u0448\\u043B\\u043E\\u0433\\u043E \\u0442\\u044B \\u043F\\u043E\\u0445\\u043E\\u0436.\",/*#__PURE__*/_jsx(\"br\",{}),\"\\u0418 \\u0441\\u043C\\u043E\\u0436\\u0435\\u0448\\u044C \\u043F\\u043E\\u0434\\u0435\\u043B\\u0438\\u0442\\u044C\\u0441\\u044F \\u0440\\u0435\\u0437\\u0443\\u043B\\u044C\\u0442\\u0430\\u0442\\u043E\\u043C \\u0432 \\u0441\\u043E\\u0446\\u0441\\u0435\\u0442\\u044F\\u0445.\"]})]}),/*#__PURE__*/_jsx(\"div\",{style:{width:'100%',display:'flex',justifyContent:'center',// горизонтально\nalignItems:'center',// вертикально (на будущее, для разных высот)\nbackground:'transparent',padding:'24px 0'// симметричный отступ\n},children:/*#__PURE__*/_jsx(Button,{size:\"l\",onClick:()=>setActivePanel('chat'),style:{backgroundColor:'#30663d',color:'#b6d3b6',width:200,fontFamily:'Georgia, serif',margin:'0 auto',// резерв на случай смены layout-движка\ndisplay:'block'// убирает inline-peculiarities\n},children:\"\\u041D\\u0430\\u0447\\u0430\\u0442\\u044C\"})})]})}),/*#__PURE__*/_jsx(Panel,{id:\"chat\",children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:'column',height:'100vh',position:'relative',background:'#FDF7F0',overflow:'hidden'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{backgroundColor:'#f0e8dd',padding:'12px 16px',borderBottom:'1px solid #aaa',display:'flex',alignItems:'center',position:'sticky',top:0,zIndex:20},children:[/*#__PURE__*/_jsx(\"img\",{src:\"https://i.pinimg.com/736x/01/90/d6/0190d61dbacf5e04320ca41c47da3d6c.jpg\",alt:\"\\u0410\\u0441\\u0441\\u0438\\u0441\\u0442\\u0435\\u043D\\u0442\",style:{width:40,height:40,borderRadius:'50%',objectFit:'cover',marginRight:12}}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:'bold',fontSize:16,color:'#254E2E'},children:\"\\u0410\\u0441\\u0441\\u0438\\u0441\\u0442\\u0435\\u043D\\u0442\"}),loading&&/*#__PURE__*/_jsx(\"div\",{style:{fontSize:12,color:'#1c1c1c'},children:\"\\u043F\\u0435\\u0447\\u0430\\u0442\\u0430\\u0435\\u0442...\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{flex:'1 1 auto',overflowY:'auto',padding:'16px'},children:[renderMessages(),characterImage&&/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0,scale:0.9},animate:{opacity:1,scale:1},transition:{duration:0.5},children:/*#__PURE__*/_jsx(Div,{children:/*#__PURE__*/_jsx(\"img\",{src:characterImage,alt:\"Character\",style:{maxWidth:'100%',height:'auto',borderRadius:'8px',marginTop:'20px',maxHeight:'400px'}})})})]}),!finished?/*#__PURE__*/_jsxs(FixedLayout,{vertical:\"bottom\",filled:true/* растягиваем на всю ширину */,style:{backgroundColor:'#f0e8dd',padding:'12px 16px',paddingBottom:'calc(12px + var(--vk-safe-bottom, 0px))'},children:[/*#__PURE__*/_jsx(Textarea,{value:input,onChange:e=>setInput(e.target.value),onKeyDown:e=>{if(e.key==='Enter'&&!e.shiftKey){e.preventDefault();sendAnswer();}},placeholder:\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u043E\\u0442\\u0432\\u0435\\u0442...\",style:{backgroundColor:'rgba(84,129,84,0.76)',color:'#1c1c1c',borderRadius:'12px',padding:'10px',fontSize:'16px',resize:'none'}}),/*#__PURE__*/_jsx(Button,{size:\"l\",stretched:true,style:{marginTop:8,backgroundColor:'#30663d',color:'#b6d3b6'},onClick:sendAnswer,loading:loading,children:\"\\u041E\\u0442\\u043F\\u0440\\u0430\\u0432\\u0438\\u0442\\u044C\"})]}):characterImage?/*#__PURE__*/_jsxs(Div,{style:{padding:'16px',display:'flex',flexDirection:'column',gap:'12px',backgroundColor:'#fdf7f0',borderTop:'1px solid #ddd'},children:[/*#__PURE__*/_jsx(Button,{size:\"l\",stretched:true,style:{backgroundColor:'#30663d',color:'#ffffff'},onClick:async()=>{try{const data=await bridge.send('VKWebAppShowStoryBox',{background_type:'image',url:characterImage});if(data.code_data)console.log('История открыта:',data);}catch(err){console.log('Ошибка:',err);}},children:\"\\u041F\\u043E\\u0434\\u0435\\u043B\\u0438\\u0442\\u044C\\u0441\\u044F\"}),/*#__PURE__*/_jsx(Button,{size:\"l\",stretched:true,style:{backgroundColor:'#30663d',color:'#ffffff'},href:\"https://xn--b1aaffobumib0c5a.xn--p1ai/\",target:\"_blank\",children:\"\\u0423\\u0437\\u043D\\u0430\\u0442\\u044C \\u0431\\u043E\\u043B\\u044C\\u0448\\u0435 \\u043E \\u0434\\u0432\\u0438\\u0436\\u0435\\u043D\\u0438\\u0438 \\u0432\\u0434\\u043E\\u0445\\u043D\\u043E\\u0432\\u0438\\u0442\\u0435\\u043B\\u0435\\u0439\"}),/*#__PURE__*/_jsx(Button,{size:\"l\",stretched:true,style:{backgroundColor:'#30663d',color:'#ffffff'},href:\"https://xn--b1aaffobumib0c5a.xn--p1ai/\",target:\"_blank\",children:\"\\u0423\\u0437\\u043D\\u0430\\u0442\\u044C \\u0438\\u0441\\u0442\\u043E\\u0440\\u0438\\u0438 \\u0434\\u0440\\u0443\\u0433\\u0438\\u0445 \\u0433\\u0435\\u0440\\u043E\\u0435\\u0432\"})]}):null]})})]})})})})})})});};export default App;","map":{"version":3,"names":["React","useState","useEffect","useRef","AdaptivityProvider","AppRoot","Button","ConfigProvider","Div","Panel","Textarea","SplitCol","SplitLayout","View","FixedLayout","motion","AnimatePresence","bridge","jsx","_jsx","jsxs","_jsxs","questions","App","activePanel","setActivePanel","currentQuestionIndex","setCurrentQuestionIndex","messages","setMessages","answers","setAnswers","input","setInput","loading","setLoading","finished","setFinished","characterImage","setCharacterImage","fontsLoaded","setFontsLoaded","messagesEndRef","MIN_LOADING_TIME","loadingStartTime","Date","now","document","fonts","ready","then","elapsed","delay","Math","max","setTimeout","setVH","documentElement","style","setProperty","window","innerHeight","addEventListener","removeEventListener","isTouchDevice","navigator","maxTouchPoints","viewportHeight","setViewportHeight","handleResize","send","cb","_ref","_data$insets","detail","type","data","insets","bottom","undefined","subscribe","unsubscribe","current","scrollIntoView","behavior","block","length","text","from","key","sendAnswer","trim","answerText","questionText","userMessage","updatedAnswers","question","answer","prev","nextIndex","nextMessage","res","fetch","method","headers","body","JSON","stringify","user_id","username","json","imageUrl","image_url","error","renderMessages","children","initial","map","msg","div","opacity","y","animate","exit","transition","duration","display","justifyContent","marginBottom","background","color","padding","borderRadius","maxWidth","wordBreak","ref","position","top","left","width","height","backgroundColor","alignItems","zIndex","className","overflow","id","flexDirection","src","alt","objectFit","maxHeight","fontFamily","fontSize","fontWeight","boxShadow","lineHeight","size","onClick","margin","borderBottom","marginRight","flex","overflowY","scale","marginTop","vertical","filled","paddingBottom","value","onChange","e","target","onKeyDown","shiftKey","preventDefault","placeholder","resize","stretched","gap","borderTop","background_type","url","code_data","console","log","err","href"],"sources":["/Users/viktoriaromazanova/PycharmProjects/vk_chatgpt/frontend/src/App.js"],"sourcesContent":["import React, {useState, useEffect, useRef} from 'react';\nimport {\n    AdaptivityProvider,\n    AppRoot,\n    Button,\n    ConfigProvider,\n    Div,\n    Panel,\n    Textarea,\n    SplitCol,\n    SplitLayout,\n    View,\n} from '@vkontakte/vkui';\nimport '@vkontakte/vkui/dist/vkui.css';\nimport {FixedLayout} from '@vkontakte/vkui';\nimport {motion, AnimatePresence} from 'framer-motion';\nimport bridge from '@vkontakte/vk-bridge';\n\nconst questions = [\n    'Что тебе ближе — решать сложные задачи в одиночестве или помогать другим справляться с трудностями?',\n    'Любишь ли ты точность и технические детали, или тебе ближе творчество и воображение?',\n    'Как ты реагируешь в экстремальных ситуациях: действуешь хладнокровно, срываешься на эмоции или берёшь на себя заботу о других?',\n    'Что тебя вдохновляет больше — слова, которые могут изменить мышление, или поступки, которые меняют жизнь?',\n    'Есть ли у тебя тяга к заботе о здоровье — своём и окружающих — или тебя больше влечёт работа руками, с механизмами и конструкциями?',\n    'Ты больше мечтатель, стратег, мастер дела или защитник слабых?',\n];\n\nconst App = () => {\n    const [activePanel, setActivePanel] = useState('intro');\n    const [currentQuestionIndex, setCurrentQuestionIndex] = useState(0);\n    const [messages, setMessages] = useState([]);\n    const [answers, setAnswers] = useState([]);\n    const [input, setInput] = useState('');\n    const [loading, setLoading] = useState(false);\n    const [finished, setFinished] = useState(false);\n    const [characterImage, setCharacterImage] = useState(null);\n    const [fontsLoaded, setFontsLoaded] = useState(false);\n    const messagesEndRef = useRef(null);\n\n    // Минимальное время ожидания экрана загрузки (в мс)\n    const MIN_LOADING_TIME = 4500;\n    const [loadingStartTime] = useState(Date.now());\n\n    // Ожидание загрузки всех шрифтов с учетом минимальной задержки\n    useEffect(() => {\n        document.fonts.ready.then(() => {\n            const elapsed = Date.now() - loadingStartTime;\n            const delay = Math.max(0, MIN_LOADING_TIME - elapsed);\n            setTimeout(() => setFontsLoaded(true), delay);\n        });\n    }, [loadingStartTime]);\n\n    useEffect(() => {\n        const setVH = () =>\n            document.documentElement.style\n                .setProperty('--vh', `${window.innerHeight * 0.01}px`);\n        setVH();\n        window.addEventListener('resize', setVH);\n        return () => window.removeEventListener('resize', setVH);\n    }, []);\n\n\n    // Определяем, поддерживает ли устройство сенсорный ввод (для автоскролла)\n    const isTouchDevice = ('ontouchstart' in window || navigator.maxTouchPoints > 0);\n    const [viewportHeight, setViewportHeight] = useState(window.innerHeight);\n\n    useEffect(() => {\n        const handleResize = () => {\n            setViewportHeight(window.innerHeight);\n        };\n\n        window.addEventListener('resize', handleResize);\n        return () => window.removeEventListener('resize', handleResize);\n    }, []);\n    useEffect(() => {\n        /** сразу запрашиваем актуальные инкрусты */\n        bridge.send('VKWebAppGetConfig');\n\n        /** слушаем дальнейшие изменения (например, появление клавиатуры) */\n        const cb = ({detail: {type, data}}) => {\n            if (\n                type === 'VKWebAppUpdateConfig' &&\n                data?.insets?.bottom !== undefined\n            ) {\n                document.documentElement.style.setProperty(\n                    '--vk-safe-bottom',\n                    `${data.insets.bottom}px`,\n                );\n            }\n        };\n\n        bridge.subscribe(cb);\n        return () => bridge.unsubscribe(cb);\n    }, []);\n\n\n    // Эффект для автоскролла в конец чата (только для сенсорных устройств)\n    useEffect(() => {\n        if (isTouchDevice && messagesEndRef.current) {\n            messagesEndRef.current.scrollIntoView({behavior: 'smooth', block: 'end'});\n        }\n    }, [messages, isTouchDevice, viewportHeight]);\n\n\n    useEffect(() => {\n        if (activePanel === 'chat' && messages.length === 0) {\n            setMessages([{text: questions[0], from: 'gpt', key: Date.now()}]);\n        }\n    }, [activePanel, messages.length]);\n\n\n    const sendAnswer = async () => {\n        if (!input.trim()) return;\n\n        const answerText = input.trim();\n        const questionText = questions[currentQuestionIndex];\n\n        const userMessage = {text: answerText, from: 'user', key: Date.now()};\n        const updatedAnswers = [...answers, {question: questionText, answer: answerText}];\n\n        setMessages(prev => [...prev, userMessage]);\n        setAnswers(updatedAnswers);\n        setInput('');\n        setLoading(true);\n\n        const nextIndex = currentQuestionIndex + 1;\n\n        if (nextIndex < questions.length) {\n            setTimeout(() => {\n                const nextMessage = {\n                    text: questions[nextIndex],\n                    from: 'gpt',\n                    key: Date.now(),\n                };\n                setMessages(prev => [...prev, nextMessage]);\n                setCurrentQuestionIndex(nextIndex);\n                setLoading(false);\n            }, 700);\n        } else {\n            setFinished(true);\n            try {\n                const res = await fetch('https://dc9910de271be81df62e5d86f21b4a27.serveo.net/chat/send', {\n                    method: 'POST',\n                    headers: {'Content-Type': 'application/json'},\n                    body: JSON.stringify({\n                        user_id: 'vk_user',\n                        username: 'vk_user',\n                        answers: updatedAnswers,\n                    }),\n                });\n\n                const data = await res.json();\n                const imageUrl = data.image_url;\n\n                setCharacterImage(imageUrl);\n                setMessages(prev => [...prev, {text: 'Вы похожи на...', from: 'gpt', key: Date.now()}]);\n\n            } catch (error) {\n                setMessages(prev => [\n                    ...prev,\n                    {text: 'Хм... Попробуйте еще раз!', from: 'gpt', key: Date.now()},\n                ]);\n            }\n            setLoading(false);\n        }\n    };\n\n    const renderMessages = () => (\n        <Div>\n            <AnimatePresence initial={false}>\n                {messages.map((msg) => (\n                    <motion.div\n                        key={msg.key}\n                        initial={{opacity: 0, y: 10}}\n                        animate={{opacity: 1, y: 0}}\n                        exit={{opacity: 0, y: 10}}\n                        transition={{duration: 0.3}}\n                        style={{\n                            display: 'flex',\n                            justifyContent: msg.from === 'user' ? 'flex-end' : 'flex-start',\n                            marginBottom: 10,\n                        }}\n                    >\n                        <div\n                            style={{\n                                background: msg.from === 'user' ? '#f0e8dd' : '#e3d5c4',\n                                color: '#1c1c1c',\n                                padding: '10px 14px',\n                                borderRadius: '16px',\n                                display: 'inline-block',\n                                maxWidth: '75%',\n                                wordBreak: 'break-word',\n                            }}\n                        >\n                            {msg.text}\n                        </div>\n                    </motion.div>\n                ))}\n            </AnimatePresence>\n            {/* Элемент для автоскролла */}\n            <div ref={messagesEndRef}/>\n        </Div>\n    );\n\n    // Отображаем экран загрузки, пока не загружены все шрифты\n    if (!fontsLoaded) {\n        return (\n            <div\n                style={{\n                    position: 'fixed',\n                    top: 0,\n                    left: 0,\n                    width: '100vw',\n                    height: '100vh',\n                    backgroundColor: '#FDF7F0',\n                    display: 'flex',\n                    alignItems: 'center',\n                    justifyContent: 'center',\n                    zIndex: 9999,\n                }}\n            >\n                <div className=\"loader\"></div>\n            </div>\n        );\n    }\n\n    return (\n        <ConfigProvider>\n            <AdaptivityProvider>\n                <div style={{width: '100%', height: '100%', overflow: 'hidden', backgroundColor: '#FDF7F0'}}><AppRoot>\n                    <SplitLayout style={{width: '100%', height: '100%'}}>\n                        <SplitCol style={{width: '100%', height: '100%'}}>\n                            <View activePanel={activePanel}>\n                                <Panel id=\"intro\">\n                                    <Div\n                                        style={{\n                                            display: 'flex',\n                                            flexDirection: 'column',\n                                            justifyContent: 'space-between',\n                                            height: '100vh',\n                                            padding: 0,\n                                            backgroundColor: '#fdf7f0',\n                                        }}\n                                    >\n                                        <div style={{position: 'relative'}}>\n                                            <img\n                                                src=\"https://i.pinimg.com/736x/01/90/d6/0190d61dbacf5e04320ca41c47da3d6c.jpg\"\n                                                alt=\"Вдохновители\"\n                                                style={{\n                                                    width: '100%',\n                                                    objectFit: 'cover',\n                                                    maxHeight: '200px',\n                                                }}\n                                            />\n                                            <div\n                                                style={{\n                                                    position: 'absolute',\n                                                    top: '20%',\n                                                    left: '10%',\n                                                    color: '#254E2E',\n                                                    fontFamily: 'Anticva',\n                                                    fontSize: '20px',\n                                                    fontWeight: 'bold',\n                                                }}\n                                            >\n                                                БЛАГО ОБЩЕЕ <br/> ВЫШЕ МОЕГО\n                                            </div>\n                                        </div>\n\n                                        <Div\n                                            style={{\n                                                padding: '20px',\n                                                background: '#ffffff',\n                                                borderRadius: '12px',\n                                                boxShadow: '0px 6px 12px rgba(0, 0, 0, 0.1)',\n                                            }}\n                                        >\n                                            <p\n                                                style={{\n                                                    color: '#6C828D',\n                                                    fontFamily: 'CodeNext',\n                                                    lineHeight: '1.6',\n                                                }}\n                                            >\n                                                Добро пожаловать в приложение <strong>«Кто ты из героев\n                                                прошлого?»</strong> — часть проекта <strong>«Вдохновители»</strong>.\n                                            </p>\n                                            <p\n                                                style={{\n                                                    color: '#6C828D',\n                                                    fontFamily: 'CodeNext',\n                                                    lineHeight: '1.6',\n                                                }}\n                                            >\n                                                Этот сервис создан, чтобы каждый мог почувствовать личную связь с\n                                                историей Великой Отечественной войны.\n                                            </p>\n                                            <p\n                                                style={{\n                                                    color: '#6C828D',\n                                                    fontFamily: 'CodeNext',\n                                                    lineHeight: '1.6',\n                                                }}\n                                            >\n                                                Отвечай на вопросы, рассказывая о себе — свободно и искренне.<br/>\n                                                После этого ты узнаешь, на кого из героев прошлого ты похож.<br/>\n                                                И сможешь поделиться результатом в соцсетях.\n                                            </p>\n                                        </Div>\n\n                                        <div\n                                            style={{\n                                                width: '100%',\n                                                display: 'flex',\n                                                justifyContent: 'center',   // горизонтально\n                                                alignItems: 'center',       // вертикально (на будущее, для разных высот)\n                                                background: 'transparent',\n                                                padding: '24px 0',          // симметричный отступ\n                                            }}\n                                        >\n                                            <Button\n                                                size=\"l\"\n                                                onClick={() => setActivePanel('chat')}\n                                                style={{\n                                                    backgroundColor: '#30663d',\n                                                    color: '#b6d3b6',\n                                                    width: 200,\n                                                    fontFamily: 'Georgia, serif',\n                                                    margin: '0 auto',         // резерв на случай смены layout-движка\n                                                    display: 'block',         // убирает inline-peculiarities\n                                                }}\n                                            >\n                                                Начать\n                                            </Button>\n                                        </div>\n\n                                    </Div>\n                                </Panel>\n\n                                <Panel id=\"chat\">\n                                    <div style={{\n                                        display: 'flex',\n                                        flexDirection: 'column',\n                                        height: '100vh',\n                                        position: 'relative',\n                                        background: '#FDF7F0',\n                                        overflow: 'hidden',\n                                    }}>\n\n                                        <div\n                                            style={{\n                                                backgroundColor: '#f0e8dd',\n                                                padding: '12px 16px',\n                                                borderBottom: '1px solid #aaa',\n                                                display: 'flex',\n                                                alignItems: 'center',\n                                                position: 'sticky',\n                                                top: 0,\n                                                zIndex: 20,\n                                            }}\n                                        >\n                                            <img\n                                                src=\"https://i.pinimg.com/736x/01/90/d6/0190d61dbacf5e04320ca41c47da3d6c.jpg\"\n                                                alt=\"Ассистент\"\n                                                style={{\n                                                    width: 40,\n                                                    height: 40,\n                                                    borderRadius: '50%',\n                                                    objectFit: 'cover',\n                                                    marginRight: 12,\n                                                }}\n                                            />\n                                            <div>\n                                                <div style={{fontWeight: 'bold', fontSize: 16, color: '#254E2E'}}>\n                                                    Ассистент\n                                                </div>\n                                                {loading && (\n                                                    <div style={{fontSize: 12, color: '#1c1c1c'}}>\n                                                        печатает...\n                                                    </div>\n                                                )}\n                                            </div>\n\n                                        </div>\n                                        <div style={{flex: '1 1 auto', overflowY: 'auto', padding: '16px'}}>\n                                            {renderMessages()}\n                                            {characterImage && (\n                                                <motion.div initial={{opacity: 0, scale: 0.9}}\n                                                            animate={{opacity: 1, scale: 1}}\n                                                            transition={{duration: 0.5}}>\n                                                    <Div>\n                                                        <img src={characterImage} alt=\"Character\" style={{\n                                                            maxWidth: '100%',\n                                                            height: 'auto',\n                                                            borderRadius: '8px',\n                                                            marginTop: '20px',\n                                                            maxHeight: '400px'\n                                                        }}/>\n                                                    </Div>\n                                                </motion.div>\n                                            )}\n                                        </div>\n                                        {!finished ? (\n                                                <FixedLayout\n                                                    vertical=\"bottom\"\n                                                    filled       /* растягиваем на всю ширину */\n                                                    style={{\n                                                        backgroundColor: '#f0e8dd',\n                                                        padding: '12px 16px',\n                                                        paddingBottom: 'calc(12px + var(--vk-safe-bottom, 0px))',\n                                                    }}\n                                                >\n                                                    <Textarea\n                                                        value={input}\n                                                        onChange={e => setInput(e.target.value)}\n                                                        onKeyDown={e => {\n                                                            if (e.key === 'Enter' && !e.shiftKey) {\n                                                                e.preventDefault();\n                                                                sendAnswer();\n                                                            }\n                                                        }}\n                                                        placeholder=\"Введите ответ...\"\n                                                        style={{\n                                                            backgroundColor: 'rgba(84,129,84,0.76)',\n                                                            color: '#1c1c1c',\n                                                            borderRadius: '12px',\n                                                            padding: '10px',\n                                                            fontSize: '16px',\n                                                            resize: 'none'\n                                                        }}\n                                                    />\n                                                    <Button\n                                                        size=\"l\"\n                                                        stretched\n                                                        style={{marginTop: 8, backgroundColor: '#30663d', color: '#b6d3b6'}}\n                                                        onClick={sendAnswer}\n                                                        loading={loading}\n                                                    >\n                                                        Отправить\n                                                    </Button>\n                                                </FixedLayout>\n                                            ) : characterImage ? (\n                                            <Div style={{\n                                            padding: '16px',\n                                            display: 'flex',\n                                            flexDirection: 'column',\n                                            gap: '12px',\n                                            backgroundColor: '#fdf7f0',\n                                            borderTop: '1px solid #ddd',\n                                        }}>\n                                        <Button\n                                            size=\"l\"\n                                            stretched\n                                            style={{backgroundColor: '#30663d', color: '#ffffff'}}\n                                            onClick={async () => {\n                                                try {\n                                                    const data = await bridge.send('VKWebAppShowStoryBox', {\n                                                        background_type: 'image',\n                                                        url: characterImage\n                                                    });\n                                                    if (data.code_data) console.log('История открыта:', data);\n                                                } catch (err) {\n                                                    console.log('Ошибка:', err);\n                                                }\n                                            }}\n                                        >\n                                            Поделиться\n                                        </Button>\n                                        <Button\n                                            size=\"l\"\n                                            stretched\n                                            style={{backgroundColor: '#30663d', color: '#ffffff'}}\n                                            href=\"https://xn--b1aaffobumib0c5a.xn--p1ai/\"\n                                            target=\"_blank\"\n                                        >\n                                            Узнать больше о движении вдохновителей\n                                        </Button>\n                                        <Button\n                                            size=\"l\"\n                                            stretched\n                                            style={{backgroundColor: '#30663d', color: '#ffffff'}}\n                                            href=\"https://xn--b1aaffobumib0c5a.xn--p1ai/\"\n                                            target=\"_blank\"\n                                        >\n                                            Узнать истории других героев\n                                        </Button>\n                                    </Div>\n                                    ) : null}\n\n                </div>\n            </Panel>\n\n        </View>\n</SplitCol>\n</SplitLayout>\n</AppRoot>\n</div>\n</AdaptivityProvider>\n</ConfigProvider>\n)\n    ;\n};\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}