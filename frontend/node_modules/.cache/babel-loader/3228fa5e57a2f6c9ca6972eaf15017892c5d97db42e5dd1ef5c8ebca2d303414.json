{"ast":null,"code":"import { useEffect } from \"react\";\nimport { useDOM } from \"../lib/dom.js\";\nimport { CustomResizeObserver } from \"../lib/floating/customResizeObserver.js\";\nimport { isRefObject } from \"../lib/isRefObject.js\";\nimport { useStableCallback } from \"./useStableCallback.js\";\n/**\n * Хук вызывает переданный коллбэк при изменении размеров элемента.\n */\nexport function useResizeObserver(ref, callback) {\n  const stableCallback = useStableCallback(callback);\n  const {\n    window\n  } = useDOM();\n  useEffect(function addResizeObserverHandler() {\n    if (!ref || !window) {\n      return;\n    }\n    if (ref === window) {\n      const onResize = () => stableCallback(ref);\n      ref.addEventListener('resize', onResize);\n      return () => ref.removeEventListener('resize', onResize);\n    }\n    /* istanbul ignore if: невозможный кейс (в SSR вызова этой функции не будет) */\n    if (!isRefObject(ref) || !ref.current) {\n      return;\n    }\n    const element = ref.current;\n    const canUseResizeObserver = 'ResizeObserver' in window && window.ResizeObserver !== undefined;\n    const observeFn = () => stableCallback(element);\n    const observer = canUseResizeObserver ? new ResizeObserver(observeFn) : new CustomResizeObserver(observeFn);\n    observer.observe(element);\n    if (observer instanceof CustomResizeObserver) {\n      observer.appendToTheDOM();\n    }\n    return () => observer.disconnect();\n  }, [ref, stableCallback, window]);\n}","map":{"version":3,"names":["useEffect","useDOM","CustomResizeObserver","isRefObject","useStableCallback","useResizeObserver","ref","callback","stableCallback","window","addResizeObserverHandler","onResize","addEventListener","removeEventListener","current","element","canUseResizeObserver","ResizeObserver","undefined","observeFn","observer","observe","appendToTheDOM","disconnect"],"sources":["/Users/viktoriaromazanova/PycharmProjects/vk_chatgpt/frontend/node_modules/@vkontakte/vkui/src/hooks/useResizeObserver.ts"],"sourcesContent":["import { useEffect } from 'react';\nimport type * as React from 'react';\nimport { useDOM } from '../lib/dom';\nimport { CustomResizeObserver } from '../lib/floating/customResizeObserver';\nimport { isRefObject } from '../lib/isRefObject';\nimport { useStableCallback } from './useStableCallback';\n\n/**\n * Хук вызывает переданный коллбэк при изменении размеров элемента.\n */\nexport function useResizeObserver(\n  ref: React.RefObject<HTMLElement | null> | Window | null | undefined,\n  callback: (element: HTMLElement | Window) => void,\n): void {\n  const stableCallback = useStableCallback(callback);\n  const { window } = useDOM();\n\n  useEffect(\n    function addResizeObserverHandler() {\n      if (!ref || !window) {\n        return;\n      }\n\n      if (ref === window) {\n        const onResize = () => stableCallback(ref);\n        ref.addEventListener('resize', onResize);\n        return () => ref.removeEventListener('resize', onResize);\n      }\n\n      /* istanbul ignore if: невозможный кейс (в SSR вызова этой функции не будет) */\n      if (!isRefObject(ref) || !ref.current) {\n        return;\n      }\n      const element = ref.current;\n      const canUseResizeObserver =\n        'ResizeObserver' in window && window.ResizeObserver !== undefined;\n\n      const observeFn = () => stableCallback(element);\n\n      const observer: ResizeObserver | CustomResizeObserver = canUseResizeObserver\n        ? // eslint-disable-next-line compat/compat\n          new ResizeObserver(observeFn)\n        : new CustomResizeObserver(observeFn);\n      observer.observe(element);\n\n      if (observer instanceof CustomResizeObserver) {\n        observer.appendToTheDOM();\n      }\n\n      return () => observer.disconnect();\n    },\n    [ref, stableCallback, window],\n  );\n}\n"],"mappings":"AAAA,SAASA,SAAS,QAAQ;AAE1B,SAASC,MAAM,QAAQ;AACvB,SAASC,oBAAoB,QAAQ;AACrC,SAASC,WAAW,QAAQ;AAC5B,SAASC,iBAAiB,QAAQ;AAElC;;;AAGA,OAAO,SAASC,kBACdC,GAAoE,EACpEC,QAAiD;EAEjD,MAAMC,cAAA,GAAiBJ,iBAAA,CAAkBG,QAAA;EACzC,MAAM;IAAEE;EAAM,CAAE,GAAGR,MAAA;EAEnBD,SAAA,CACE,SAASU,yBAAA;IACP,IAAI,CAACJ,GAAA,IAAO,CAACG,MAAA,EAAQ;MACnB;IACF;IAEA,IAAIH,GAAA,KAAQG,MAAA,EAAQ;MAClB,MAAME,QAAA,GAAWA,CAAA,KAAMH,cAAA,CAAeF,GAAA;MACtCA,GAAA,CAAIM,gBAAgB,CAAC,UAAUD,QAAA;MAC/B,OAAO,MAAML,GAAA,CAAIO,mBAAmB,CAAC,UAAUF,QAAA;IACjD;IAEA;IACA,IAAI,CAACR,WAAA,CAAYG,GAAA,KAAQ,CAACA,GAAA,CAAIQ,OAAO,EAAE;MACrC;IACF;IACA,MAAMC,OAAA,GAAUT,GAAA,CAAIQ,OAAO;IAC3B,MAAME,oBAAA,GACJ,oBAAoBP,MAAA,IAAUA,MAAA,CAAOQ,cAAc,KAAKC,SAAA;IAE1D,MAAMC,SAAA,GAAYA,CAAA,KAAMX,cAAA,CAAeO,OAAA;IAEvC,MAAMK,QAAA,GAAkDJ,oBAAA,GAEpD,IAAIC,cAAA,CAAeE,SAAA,IACnB,IAAIjB,oBAAA,CAAqBiB,SAAA;IAC7BC,QAAA,CAASC,OAAO,CAACN,OAAA;IAEjB,IAAIK,QAAA,YAAoBlB,oBAAA,EAAsB;MAC5CkB,QAAA,CAASE,cAAc;IACzB;IAEA,OAAO,MAAMF,QAAA,CAASG,UAAU;EAClC,GACA,CAACjB,GAAA,EAAKE,cAAA,EAAgBC,MAAA,CAAO;AAEjC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}