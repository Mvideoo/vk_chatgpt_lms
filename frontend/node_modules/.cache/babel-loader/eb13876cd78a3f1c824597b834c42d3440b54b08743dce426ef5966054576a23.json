{"ast":null,"code":"import * as React from \"react\";\nimport { noop } from \"@vkontakte/vkjs\";\nimport { useStableCallback } from \"../../hooks/useStableCallback.js\";\nimport { useIsomorphicLayoutEffect } from \"../useIsomorphicLayoutEffect.js\";\nexport const useCSSKeyframesAnimationController = function (stateProp) {\n  let {\n    onEnter: onEnterProp,\n    onEntering,\n    onEntered,\n    onExit: onExitProp,\n    onExiting,\n    onExited\n  } = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  let disableInitAnimation = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n  const [state, setState] = React.useState(() => disableInitAnimation ? stateProp === 'enter' ? 'entered' : 'exited' : stateProp);\n  const prevStateRef = React.useRef(undefined);\n  React.useEffect(() => {\n    prevStateRef.current = stateProp;\n  });\n  const onAnimationStart = () => {\n    if (state === 'enter') {\n      setState('entering');\n      if (onEntering) {\n        onEntering();\n      }\n    } else if (state === 'exit') {\n      setState('exiting');\n      if (onExiting) {\n        onExiting();\n      }\n    }\n  };\n  const onAnimationEnd = () => {\n    if (state === 'entering') {\n      setState('entered');\n      if (onEntered) {\n        onEntered();\n      }\n    } else if (state === 'exiting') {\n      setState('exited');\n      if (onExited) {\n        onExited();\n      }\n    }\n  };\n  const onEnter = useStableCallback(onEnterProp || noop);\n  const onExit = useStableCallback(onExitProp || noop);\n  useIsomorphicLayoutEffect(function updateState() {\n    const prevState = prevStateRef.current;\n    if (prevState === stateProp) {\n      return;\n    }\n    switch (stateProp) {\n      case 'enter':\n        if (state === 'entering' || state === 'entered') {\n          break;\n        }\n        setState('enter');\n        onEnter();\n        break;\n      case 'exit':\n        if (state === 'exiting' || state === 'exited') {\n          break;\n        }\n        setState('exit');\n        onExit();\n        break;\n    }\n  }, [state, stateProp, onEnter, onExit]);\n  return [state, {\n    onAnimationStart,\n    onAnimationEnd\n  }];\n};","map":{"version":3,"names":["React","noop","useStableCallback","useIsomorphicLayoutEffect","useCSSKeyframesAnimationController","stateProp","onEnter","onEnterProp","onEntering","onEntered","onExit","onExitProp","onExiting","onExited","arguments","length","undefined","disableInitAnimation","state","setState","useState","prevStateRef","useRef","useEffect","current","onAnimationStart","onAnimationEnd","updateState","prevState"],"sources":["/Users/viktoriaromazanova/PycharmProjects/vk_chatgpt/frontend/node_modules/@vkontakte/vkui/src/lib/animation/useCSSKeyframesAnimationController.ts"],"sourcesContent":["import * as React from 'react';\nimport { noop } from '@vkontakte/vkjs';\nimport { useStableCallback } from '../../hooks/useStableCallback';\nimport { useIsomorphicLayoutEffect } from '../useIsomorphicLayoutEffect';\n\nexport type UseCSSAnimationControllerCallback = {\n  onEnter?: VoidFunction;\n  onEntering?: VoidFunction;\n  onEntered?: VoidFunction;\n  onExit?: VoidFunction;\n  onExiting?: VoidFunction;\n  onExited?: VoidFunction;\n};\n\nexport type AnimationState = 'enter' | 'entering' | 'entered' | 'exit' | 'exiting' | 'exited';\n\nexport type AnimationHandlers = { onAnimationStart: VoidFunction; onAnimationEnd: VoidFunction };\n\nexport const useCSSKeyframesAnimationController = (\n  stateProp: 'enter' | 'exit',\n  {\n    onEnter: onEnterProp,\n    onEntering,\n    onEntered,\n    onExit: onExitProp,\n    onExiting,\n    onExited,\n  }: UseCSSAnimationControllerCallback = {},\n  disableInitAnimation = false,\n): [AnimationState, AnimationHandlers] => {\n  const [state, setState] = React.useState<AnimationState>(() =>\n    disableInitAnimation ? (stateProp === 'enter' ? 'entered' : 'exited') : stateProp,\n  );\n\n  const prevStateRef = React.useRef<'enter' | 'exit' | undefined>(undefined);\n  React.useEffect(() => {\n    prevStateRef.current = stateProp;\n  });\n\n  const onAnimationStart = () => {\n    if (state === 'enter') {\n      setState('entering');\n      if (onEntering) {\n        onEntering();\n      }\n    } else if (state === 'exit') {\n      setState('exiting');\n      if (onExiting) {\n        onExiting();\n      }\n    }\n  };\n\n  const onAnimationEnd = () => {\n    if (state === 'entering') {\n      setState('entered');\n      if (onEntered) {\n        onEntered();\n      }\n    } else if (state === 'exiting') {\n      setState('exited');\n      if (onExited) {\n        onExited();\n      }\n    }\n  };\n\n  const onEnter = useStableCallback(onEnterProp || noop);\n  const onExit = useStableCallback(onExitProp || noop);\n\n  useIsomorphicLayoutEffect(\n    function updateState() {\n      const prevState = prevStateRef.current;\n\n      if (prevState === stateProp) {\n        return;\n      }\n      switch (stateProp) {\n        case 'enter':\n          if (state === 'entering' || state === 'entered') {\n            break;\n          }\n\n          setState('enter');\n          onEnter();\n          break;\n        case 'exit':\n          if (state === 'exiting' || state === 'exited') {\n            break;\n          }\n\n          setState('exit');\n          onExit();\n          break;\n      }\n    },\n    [state, stateProp, onEnter, onExit],\n  );\n\n  return [state, { onAnimationStart, onAnimationEnd }];\n};\n"],"mappings":"AAAA,YAAYA,KAAA,MAAW;AACvB,SAASC,IAAI,QAAQ;AACrB,SAASC,iBAAiB,QAAQ;AAClC,SAASC,yBAAyB,QAAQ;AAe1C,OAAO,MAAMC,kCAAA,GAAqC,SAAAA,CAChDC,SAAA,EAS4B;EAAA,IAR5B;IACEC,OAAA,EAASC,WAAW;IACpBC,UAAU;IACVC,SAAS;IACTC,MAAA,EAAQC,UAAU;IAClBC,SAAS;IACTC;EAAQ,CAC0B,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,CAAC,CAAC;EAAA,IACzCG,oBAAA,GAAAH,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAuB,KAAK;EAE5B,MAAM,CAACI,KAAA,EAAOC,QAAA,CAAS,GAAGnB,KAAA,CAAMoB,QAAQ,CAAiB,MACvDH,oBAAA,GAAwBZ,SAAA,KAAc,UAAU,YAAY,WAAYA,SAAA;EAG1E,MAAMgB,YAAA,GAAerB,KAAA,CAAMsB,MAAM,CAA+BN,SAAA;EAChEhB,KAAA,CAAMuB,SAAS,CAAC;IACdF,YAAA,CAAaG,OAAO,GAAGnB,SAAA;EACzB;EAEA,MAAMoB,gBAAA,GAAmBA,CAAA;IACvB,IAAIP,KAAA,KAAU,SAAS;MACrBC,QAAA,CAAS;MACT,IAAIX,UAAA,EAAY;QACdA,UAAA;MACF;IACF,OAAO,IAAIU,KAAA,KAAU,QAAQ;MAC3BC,QAAA,CAAS;MACT,IAAIP,SAAA,EAAW;QACbA,SAAA;MACF;IACF;EACF;EAEA,MAAMc,cAAA,GAAiBA,CAAA;IACrB,IAAIR,KAAA,KAAU,YAAY;MACxBC,QAAA,CAAS;MACT,IAAIV,SAAA,EAAW;QACbA,SAAA;MACF;IACF,OAAO,IAAIS,KAAA,KAAU,WAAW;MAC9BC,QAAA,CAAS;MACT,IAAIN,QAAA,EAAU;QACZA,QAAA;MACF;IACF;EACF;EAEA,MAAMP,OAAA,GAAUJ,iBAAA,CAAkBK,WAAA,IAAeN,IAAA;EACjD,MAAMS,MAAA,GAASR,iBAAA,CAAkBS,UAAA,IAAcV,IAAA;EAE/CE,yBAAA,CACE,SAASwB,YAAA;IACP,MAAMC,SAAA,GAAYP,YAAA,CAAaG,OAAO;IAEtC,IAAII,SAAA,KAAcvB,SAAA,EAAW;MAC3B;IACF;IACA,QAAQA,SAAA;MACN,KAAK;QACH,IAAIa,KAAA,KAAU,cAAcA,KAAA,KAAU,WAAW;UAC/C;QACF;QAEAC,QAAA,CAAS;QACTb,OAAA;QACA;MACF,KAAK;QACH,IAAIY,KAAA,KAAU,aAAaA,KAAA,KAAU,UAAU;UAC7C;QACF;QAEAC,QAAA,CAAS;QACTT,MAAA;QACA;IACJ;EACF,GACA,CAACQ,KAAA,EAAOb,SAAA,EAAWC,OAAA,EAASI,MAAA,CAAO;EAGrC,OAAO,CAACQ,KAAA,EAAO;IAAEO,gBAAA;IAAkBC;EAAe,EAAE;AACtD","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}