{"ast":null,"code":"'use client';\n\nimport { _ as _object_spread } from \"@swc/helpers/_/_object_spread\";\nimport { _ as _object_spread_props } from \"@swc/helpers/_/_object_spread_props\";\nimport { _ as _object_without_properties } from \"@swc/helpers/_/_object_without_properties\";\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport * as React from \"react\";\nimport { Icon20Cancel } from \"@vkontakte/icons\";\nimport { classNames, hasReactNode, noop } from \"@vkontakte/vkjs\";\nimport { useAdaptivityWithJSMediaQueries } from \"../../hooks/useAdaptivityWithJSMediaQueries.js\";\nimport { usePlatform } from \"../../hooks/usePlatform.js\";\nimport { useCSSKeyframesAnimationController } from \"../../lib/animation/index.js\";\nimport { stopPropagation } from \"../../lib/utils.js\";\nimport { FocusTrap } from \"../FocusTrap/FocusTrap.js\";\nimport { IconButton } from \"../IconButton/IconButton.js\";\nimport { ModalDismissButton } from \"../ModalDismissButton/ModalDismissButton.js\";\nimport { AlertActions } from \"./AlertActions.js\";\nimport { AlertDescription, AlertTitle } from \"./AlertTypography.js\";\nexport const AlertBase = _param => {\n  var {\n      actions,\n      actionsLayout = 'horizontal',\n      children,\n      title,\n      description,\n      onClose,\n      dismissLabel = 'Закрыть предупреждение',\n      renderAction,\n      actionsAlign,\n      dismissButtonMode = 'outside',\n      dismissButtonTestId,\n      onClick,\n      allowClickPropagation = false,\n      titleTestId,\n      descriptionTestId,\n      closing,\n      setClosing\n    } = _param,\n    restProps = _object_without_properties(_param, [\"actions\", \"actionsLayout\", \"children\", \"title\", \"description\", \"onClose\", \"dismissLabel\", \"renderAction\", \"actionsAlign\", \"dismissButtonMode\", \"dismissButtonTestId\", \"onClick\", \"allowClickPropagation\", \"titleTestId\", \"descriptionTestId\", \"closing\", \"setClosing\"]);\n  const generatedId = React.useId();\n  const titleId = `vkui-alert-${generatedId}-title`;\n  const descriptionId = `vkui-alert-${generatedId}-description`;\n  const platform = usePlatform();\n  const {\n    isDesktop\n  } = useAdaptivityWithJSMediaQueries();\n  const itemActionCallbackRef = React.useRef(noop);\n  const [animationState, animationHandlers] = useCSSKeyframesAnimationController(closing ? 'exit' : 'enter', {\n    onExited() {\n      itemActionCallbackRef.current();\n      itemActionCallbackRef.current = noop;\n      onClose();\n    }\n  });\n  const isDismissButtonVisible = isDesktop && platform !== 'ios';\n  const elementRef = React.useRef(null);\n  const close = React.useCallback(() => {\n    setClosing === null || setClosing === void 0 ? void 0 : setClosing(true);\n  }, [setClosing]);\n  const onItemClick = React.useCallback(item => {\n    const {\n      action: itemAction,\n      autoCloseDisabled = false\n    } = item;\n    if (autoCloseDisabled) {\n      itemAction && itemAction({\n        close\n      });\n    } else {\n      if (itemAction) {\n        itemActionCallbackRef.current = itemAction;\n      }\n      setClosing === null || setClosing === void 0 ? void 0 : setClosing(true);\n    }\n  }, [close, setClosing]);\n  const handleClick = allowClickPropagation ? onClick : event => {\n    stopPropagation(event);\n    onClick === null || onClick === void 0 ? void 0 : onClick(event);\n  };\n  return /*#__PURE__*/_jsxs(FocusTrap, _object_spread_props(_object_spread(_object_spread_props(_object_spread({}, animationHandlers), {\n    onClick: handleClick,\n    getRootRef: elementRef,\n    onClose: close,\n    autoFocus: animationState === 'entered',\n    className: classNames(\"vkuiAlert__host\", platform === 'ios' && \"vkuiAlert__ios\", platform === 'vkcom' && \"vkuiAlert__vkcom\", closing ? \"vkuiAlert__closing\" : \"vkuiAlert__opening\", isDesktop && \"vkuiAlert__desktop\"),\n    role: \"alertdialog\",\n    \"aria-modal\": true,\n    \"aria-labelledby\": titleId,\n    \"aria-describedby\": descriptionId\n  }), restProps), {\n    children: [/*#__PURE__*/_jsxs(\"div\", {\n      className: classNames(\"vkuiAlert__content\", dismissButtonMode === 'inside' && \"vkuiAlert__contentWithButton\"),\n      children: [hasReactNode(title) && /*#__PURE__*/_jsx(AlertTitle, {\n        \"data-testid\": titleTestId,\n        id: titleId,\n        children: title\n      }), hasReactNode(description) && /*#__PURE__*/_jsx(AlertDescription, {\n        \"data-testid\": descriptionTestId,\n        id: descriptionId,\n        children: description\n      }), children, isDismissButtonVisible && dismissButtonMode === 'inside' && /*#__PURE__*/_jsx(IconButton, {\n        label: dismissLabel,\n        className: classNames(\"vkuiAlert__dismiss\", 'vkuiInternalAlert__dismiss'),\n        onClick: close,\n        hoverMode: \"opacity\",\n        activeMode: \"opacity\",\n        \"data-testid\": dismissButtonTestId,\n        children: /*#__PURE__*/_jsx(Icon20Cancel, {})\n      })]\n    }), isDismissButtonVisible && dismissButtonMode === 'outside' && /*#__PURE__*/_jsx(ModalDismissButton, {\n      onClick: close,\n      \"data-testid\": dismissButtonTestId,\n      children: dismissLabel\n    }), /*#__PURE__*/_jsx(AlertActions, {\n      actions: actions,\n      actionsAlign: actionsAlign,\n      actionsLayout: actionsLayout,\n      renderAction: renderAction,\n      onItemClick: onItemClick\n    })]\n  }));\n};","map":{"version":3,"names":["React","Icon20Cancel","classNames","hasReactNode","noop","useAdaptivityWithJSMediaQueries","usePlatform","useCSSKeyframesAnimationController","stopPropagation","FocusTrap","IconButton","ModalDismissButton","AlertActions","AlertDescription","AlertTitle","AlertBase","_param","actions","actionsLayout","children","title","description","onClose","dismissLabel","renderAction","actionsAlign","dismissButtonMode","dismissButtonTestId","onClick","allowClickPropagation","titleTestId","descriptionTestId","closing","setClosing","restProps","_object_without_properties","generatedId","useId","titleId","descriptionId","platform","isDesktop","itemActionCallbackRef","useRef","animationState","animationHandlers","onExited","current","isDismissButtonVisible","elementRef","close","useCallback","onItemClick","item","action","itemAction","autoCloseDisabled","handleClick","event","_jsxs","_object_spread_props","_object_spread","getRootRef","autoFocus","className","role","_jsx","id","label","hoverMode","activeMode"],"sources":["/Users/viktoriaromazanova/PycharmProjects/vk_chatgpt/frontend/node_modules/@vkontakte/vkui/src/components/Alert/AlertBase.tsx"],"sourcesContent":["'use client';\n\nimport * as React from 'react';\nimport { Icon20Cancel } from '@vkontakte/icons';\nimport { classNames, hasReactNode, noop } from '@vkontakte/vkjs';\nimport { useAdaptivityWithJSMediaQueries } from '../../hooks/useAdaptivityWithJSMediaQueries';\nimport { usePlatform } from '../../hooks/usePlatform';\nimport { useCSSKeyframesAnimationController } from '../../lib/animation';\nimport { stopPropagation } from '../../lib/utils';\nimport { FocusTrap } from '../FocusTrap/FocusTrap';\nimport { IconButton } from '../IconButton/IconButton';\nimport { ModalDismissButton } from '../ModalDismissButton/ModalDismissButton';\nimport { type AlertActionInterface, type AlertProps } from './Alert';\nimport { AlertActions } from './AlertActions';\nimport { AlertDescription, AlertTitle } from './AlertTypography';\nimport styles from './Alert.module.css';\n\nexport interface AlertBaseProps\n  extends Omit<AlertProps, 'usePortal' | 'className' | 'style' | 'getRootRef'> {\n  closing?: boolean;\n  setClosing?: (closing: boolean) => void;\n}\n\nexport const AlertBase = ({\n  actions,\n  actionsLayout = 'horizontal',\n  children,\n  title,\n  description,\n  onClose,\n  dismissLabel = 'Закрыть предупреждение',\n  renderAction,\n  actionsAlign,\n  dismissButtonMode = 'outside',\n  dismissButtonTestId,\n  onClick,\n  allowClickPropagation = false,\n  titleTestId,\n  descriptionTestId,\n  closing,\n  setClosing,\n  ...restProps\n}: AlertBaseProps) => {\n  const generatedId = React.useId();\n\n  const titleId = `vkui-alert-${generatedId}-title`;\n  const descriptionId = `vkui-alert-${generatedId}-description`;\n\n  const platform = usePlatform();\n  const { isDesktop } = useAdaptivityWithJSMediaQueries();\n  const itemActionCallbackRef = React.useRef(noop);\n  const [animationState, animationHandlers] = useCSSKeyframesAnimationController(\n    closing ? 'exit' : 'enter',\n    {\n      onExited() {\n        itemActionCallbackRef.current();\n        itemActionCallbackRef.current = noop;\n        onClose();\n      },\n    },\n  );\n  const isDismissButtonVisible = isDesktop && platform !== 'ios';\n  const elementRef = React.useRef<HTMLDivElement>(null);\n\n  const close = React.useCallback(() => {\n    setClosing?.(true);\n  }, [setClosing]);\n\n  const onItemClick = React.useCallback(\n    (item: AlertActionInterface) => {\n      const { action: itemAction, autoCloseDisabled = false } = item;\n\n      if (autoCloseDisabled) {\n        itemAction && itemAction({ close });\n      } else {\n        if (itemAction) {\n          itemActionCallbackRef.current = itemAction;\n        }\n        setClosing?.(true);\n      }\n    },\n    [close, setClosing],\n  );\n\n  const handleClick = allowClickPropagation\n    ? onClick\n    : (event: React.MouseEvent<HTMLElement>) => {\n        stopPropagation(event);\n        onClick?.(event);\n      };\n\n  return (\n    <FocusTrap\n      {...animationHandlers}\n      onClick={handleClick}\n      getRootRef={elementRef}\n      onClose={close}\n      autoFocus={animationState === 'entered'}\n      className={classNames(\n        styles.host,\n        platform === 'ios' && styles.ios,\n        platform === 'vkcom' && styles.vkcom,\n        closing ? styles.closing : styles.opening,\n        isDesktop && styles.desktop,\n      )}\n      role=\"alertdialog\"\n      aria-modal\n      aria-labelledby={titleId}\n      aria-describedby={descriptionId}\n      {...restProps}\n    >\n      <div\n        className={classNames(\n          styles.content,\n          dismissButtonMode === 'inside' && styles.contentWithButton,\n        )}\n      >\n        {hasReactNode(title) && (\n          <AlertTitle data-testid={titleTestId} id={titleId}>\n            {title}\n          </AlertTitle>\n        )}\n        {hasReactNode(description) && (\n          <AlertDescription data-testid={descriptionTestId} id={descriptionId}>\n            {description}\n          </AlertDescription>\n        )}\n        {children}\n        {isDismissButtonVisible && dismissButtonMode === 'inside' && (\n          <IconButton\n            label={dismissLabel}\n            className={classNames(styles.dismiss, 'vkuiInternalAlert__dismiss')}\n            onClick={close}\n            hoverMode=\"opacity\"\n            activeMode=\"opacity\"\n            data-testid={dismissButtonTestId}\n          >\n            <Icon20Cancel />\n          </IconButton>\n        )}\n      </div>\n      {isDismissButtonVisible && dismissButtonMode === 'outside' && (\n        <ModalDismissButton onClick={close} data-testid={dismissButtonTestId}>\n          {dismissLabel}\n        </ModalDismissButton>\n      )}\n      <AlertActions\n        actions={actions}\n        actionsAlign={actionsAlign}\n        actionsLayout={actionsLayout}\n        renderAction={renderAction}\n        onItemClick={onItemClick}\n      />\n    </FocusTrap>\n  );\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}