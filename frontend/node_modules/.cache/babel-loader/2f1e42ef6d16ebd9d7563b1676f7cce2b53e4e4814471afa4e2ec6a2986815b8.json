{"ast":null,"code":"import * as React from \"react\";\nimport { noop } from \"@vkontakte/vkjs\";\nimport { ColorScheme } from \"../lib/colorScheme/index.js\";\nimport { useDOM } from \"../lib/dom.js\";\nimport { matchMediaListAddListener, matchMediaListRemoveListener } from \"../lib/matchMedia.js\";\nimport { useIsomorphicLayoutEffect } from \"../lib/useIsomorphicLayoutEffect.js\";\n/**\n * @private\n */\nexport const useAutoDetectColorScheme = colorSchemeProp => {\n  const {\n    window\n  } = useDOM();\n  const [colorScheme, setColorScheme] = React.useState(colorSchemeProp || ColorScheme.LIGHT);\n  useIsomorphicLayoutEffect(() => {\n    if (colorSchemeProp) {\n      setColorScheme(colorSchemeProp);\n      return noop;\n    }\n    const mediaQuery = window ? window.matchMedia('(prefers-color-scheme: dark)') : undefined;\n    if (!mediaQuery) {\n      return noop;\n    }\n    const check = event => {\n      // eslint-disable-next-line no-restricted-properties\n      setColorScheme(event.matches ? ColorScheme.DARK : ColorScheme.LIGHT);\n    };\n    check(mediaQuery);\n    matchMediaListAddListener(mediaQuery, check);\n    return () => matchMediaListRemoveListener(mediaQuery, check);\n  }, [window, colorSchemeProp]);\n  return colorScheme;\n};","map":{"version":3,"names":["React","noop","ColorScheme","useDOM","matchMediaListAddListener","matchMediaListRemoveListener","useIsomorphicLayoutEffect","useAutoDetectColorScheme","colorSchemeProp","window","colorScheme","setColorScheme","useState","LIGHT","mediaQuery","matchMedia","undefined","check","event","matches","DARK"],"sources":["/Users/viktoriaromazanova/PycharmProjects/vk_chatgpt/frontend/node_modules/@vkontakte/vkui/src/hooks/useAutoDetectColorScheme.ts"],"sourcesContent":["import * as React from 'react';\nimport { noop } from '@vkontakte/vkjs';\nimport { ColorScheme, type ColorSchemeType } from '../lib/colorScheme';\nimport { useDOM } from '../lib/dom';\nimport { matchMediaListAddListener, matchMediaListRemoveListener } from '../lib/matchMedia';\nimport { useIsomorphicLayoutEffect } from '../lib/useIsomorphicLayoutEffect';\n\n/**\n * @private\n */\nexport const useAutoDetectColorScheme = (colorSchemeProp?: ColorSchemeType): ColorSchemeType => {\n  const { window } = useDOM();\n\n  const [colorScheme, setColorScheme] = React.useState<ColorSchemeType>(\n    colorSchemeProp || ColorScheme.LIGHT,\n  );\n\n  useIsomorphicLayoutEffect(() => {\n    if (colorSchemeProp) {\n      setColorScheme(colorSchemeProp);\n      return noop;\n    }\n\n    const mediaQuery = window ? window.matchMedia('(prefers-color-scheme: dark)') : undefined;\n\n    if (!mediaQuery) {\n      return noop;\n    }\n\n    const check = (event: MediaQueryList | MediaQueryListEvent) => {\n      // eslint-disable-next-line no-restricted-properties\n      setColorScheme(event.matches ? ColorScheme.DARK : ColorScheme.LIGHT);\n    };\n    check(mediaQuery);\n    matchMediaListAddListener(mediaQuery, check);\n    return () => matchMediaListRemoveListener(mediaQuery, check);\n  }, [window, colorSchemeProp]);\n\n  return colorScheme;\n};\n"],"mappings":"AAAA,YAAYA,KAAA,MAAW;AACvB,SAASC,IAAI,QAAQ;AACrB,SAASC,WAAW,QAA8B;AAClD,SAASC,MAAM,QAAQ;AACvB,SAASC,yBAAyB,EAAEC,4BAA4B,QAAQ;AACxE,SAASC,yBAAyB,QAAQ;AAE1C;;;AAGA,OAAO,MAAMC,wBAAA,GAA4BC,eAAA;EACvC,MAAM;IAAEC;EAAM,CAAE,GAAGN,MAAA;EAEnB,MAAM,CAACO,WAAA,EAAaC,cAAA,CAAe,GAAGX,KAAA,CAAMY,QAAQ,CAClDJ,eAAA,IAAmBN,WAAA,CAAYW,KAAK;EAGtCP,yBAAA,CAA0B;IACxB,IAAIE,eAAA,EAAiB;MACnBG,cAAA,CAAeH,eAAA;MACf,OAAOP,IAAA;IACT;IAEA,MAAMa,UAAA,GAAaL,MAAA,GAASA,MAAA,CAAOM,UAAU,CAAC,kCAAkCC,SAAA;IAEhF,IAAI,CAACF,UAAA,EAAY;MACf,OAAOb,IAAA;IACT;IAEA,MAAMgB,KAAA,GAASC,KAAA;MACb;MACAP,cAAA,CAAeO,KAAA,CAAMC,OAAO,GAAGjB,WAAA,CAAYkB,IAAI,GAAGlB,WAAA,CAAYW,KAAK;IACrE;IACAI,KAAA,CAAMH,UAAA;IACNV,yBAAA,CAA0BU,UAAA,EAAYG,KAAA;IACtC,OAAO,MAAMZ,4BAAA,CAA6BS,UAAA,EAAYG,KAAA;EACxD,GAAG,CAACR,MAAA,EAAQD,eAAA,CAAgB;EAE5B,OAAOE,WAAA;AACT","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}