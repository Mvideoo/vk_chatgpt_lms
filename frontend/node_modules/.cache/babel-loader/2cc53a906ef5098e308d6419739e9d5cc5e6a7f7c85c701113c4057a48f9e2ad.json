{"ast":null,"code":"'use client';\n\nimport { _ as _object_spread } from \"@swc/helpers/_/_object_spread\";\nimport { _ as _object_spread_props } from \"@swc/helpers/_/_object_spread_props\";\nimport { _ as _object_without_properties } from \"@swc/helpers/_/_object_without_properties\";\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport * as React from \"react\";\nimport { noop } from \"@vkontakte/vkjs\";\nimport { useAdaptivityWithJSMediaQueries } from \"../../hooks/useAdaptivityWithJSMediaQueries.js\";\nimport { usePlatform } from \"../../hooks/usePlatform.js\";\nimport { useCSSKeyframesAnimationController } from \"../../lib/animation/index.js\";\nimport { AppRootPortal } from \"../AppRoot/AppRootPortal.js\";\nimport { useScrollLock } from \"../AppRoot/ScrollContext.js\";\nimport { PopoutWrapper } from \"../PopoutWrapper/PopoutWrapper.js\";\nimport { Footnote } from \"../Typography/Footnote/Footnote.js\";\nimport { ActionSheetContext } from \"./ActionSheetContext.js\";\nimport { ActionSheetDefaultIosCloseItem } from \"./ActionSheetDefaultIosCloseItem.js\";\nimport { ActionSheetDropdownMenu } from \"./ActionSheetDropdownMenu.js\";\nimport { ActionSheetDropdownSheet } from \"./ActionSheetDropdownSheet.js\";\n/**\n * @see https://vkcom.github.io/VKUI/#/ActionSheet\n */\nexport const ActionSheet = _param => {\n  var {\n      children,\n      className,\n      title,\n      description,\n      style,\n      iosCloseItem,\n      popupOffsetDistance,\n      placement,\n      mode: modeProp,\n      onClose\n    } = _param,\n    restProps = _object_without_properties(_param, [\"children\", \"className\", \"title\", \"description\", \"style\", \"iosCloseItem\", \"popupOffsetDistance\", \"placement\", \"mode\", \"onClose\"]);\n  const platform = usePlatform();\n  const [closingBy, setClosingBy] = React.useState(undefined);\n  const onCloseWithOther = React.useCallback(() => setClosingBy('other'), []);\n  const actionCallbackRef = React.useRef(noop);\n  const [animationState, animationHandlers] = useCSSKeyframesAnimationController(closingBy !== undefined ? 'exit' : 'enter', {\n    onExited() {\n      onClose({\n        closedBy: closingBy || 'other'\n      });\n      actionCallbackRef.current();\n      actionCallbackRef.current = noop;\n    }\n  });\n  const {\n    isDesktop\n  } = useAdaptivityWithJSMediaQueries();\n  const mode = modeProp !== null && modeProp !== void 0 ? modeProp : isDesktop ? 'menu' : 'sheet';\n  useScrollLock(mode === 'sheet');\n  const onItemClick = React.useCallback(_ref => {\n    let {\n      action,\n      immediateAction,\n      autoClose,\n      isCancelItem\n    } = _ref;\n    return event => {\n      event.persist();\n      immediateAction && immediateAction(event);\n      if (autoClose) {\n        if (action) {\n          actionCallbackRef.current = () => action(event);\n        }\n        setClosingBy(isCancelItem ? 'cancel-item' : 'action-item');\n      } else {\n        action && action(event);\n      }\n    };\n  }, []);\n  const contextValue = React.useMemo(() => ({\n    onItemClick,\n    mode,\n    onClose: onCloseWithOther\n  }), [mode, onCloseWithOther, onItemClick]);\n  const DropdownComponent = mode === 'menu' ? ActionSheetDropdownMenu : ActionSheetDropdownSheet;\n  const dropdownProps = mode === 'menu' ? Object.assign(restProps, {\n    popupOffsetDistance,\n    placement\n  }) : restProps;\n  const actionSheet = /*#__PURE__*/_jsx(ActionSheetContext.Provider, {\n    value: contextValue,\n    children: /*#__PURE__*/_jsxs(DropdownComponent, _object_spread_props(_object_spread({\n      closing: Boolean(closingBy),\n      role: \"dialog\",\n      \"aria-modal\": \"true\",\n      autoFocus: animationState === 'entered'\n    }, dropdownProps, animationHandlers), {\n      onClose: onCloseWithOther,\n      className: mode === 'menu' ? className : undefined,\n      style: mode === 'menu' ? style : undefined,\n      children: [/*#__PURE__*/_jsxs(\"div\", {\n        className: \"vkuiActionSheet__contentWrapper\",\n        children: [(title || description) && /*#__PURE__*/_jsxs(\"div\", {\n          className: \"vkuiActionSheet__header\",\n          children: [title && /*#__PURE__*/_jsx(Footnote, {\n            weight: \"2\",\n            className: \"vkuiActionSheet__title\",\n            children: title\n          }), description && /*#__PURE__*/_jsx(Footnote, {\n            className: \"vkuiActionSheet__description\",\n            children: description\n          })]\n        }), children]\n      }), platform === 'ios' && mode === 'sheet' && /*#__PURE__*/_jsx(\"div\", {\n        className: \"vkuiActionSheet__closeItemWrapperIos\",\n        children: iosCloseItem !== null && iosCloseItem !== void 0 ? iosCloseItem : /*#__PURE__*/_jsx(ActionSheetDefaultIosCloseItem, {})\n      })]\n    }))\n  });\n  return /*#__PURE__*/_jsx(AppRootPortal, {\n    children: /*#__PURE__*/_jsx(PopoutWrapper, {\n      noBackground: mode === 'menu',\n      closing: Boolean(closingBy),\n      alignY: \"bottom\",\n      className: className,\n      style: style,\n      onClick: onCloseWithOther,\n      strategy: \"fixed\",\n      children: actionSheet\n    })\n  });\n};","map":{"version":3,"names":["React","noop","useAdaptivityWithJSMediaQueries","usePlatform","useCSSKeyframesAnimationController","AppRootPortal","useScrollLock","PopoutWrapper","Footnote","ActionSheetContext","ActionSheetDefaultIosCloseItem","ActionSheetDropdownMenu","ActionSheetDropdownSheet","ActionSheet","_param","children","className","title","description","style","iosCloseItem","popupOffsetDistance","placement","mode","modeProp","onClose","restProps","_object_without_properties","platform","closingBy","setClosingBy","useState","undefined","onCloseWithOther","useCallback","actionCallbackRef","useRef","animationState","animationHandlers","onExited","closedBy","current","isDesktop","onItemClick","_ref","action","immediateAction","autoClose","isCancelItem","event","persist","contextValue","useMemo","DropdownComponent","dropdownProps","Object","assign","actionSheet","_jsx","Provider","value","_jsxs","_object_spread_props","_object_spread","closing","Boolean","role","autoFocus","weight","noBackground","alignY","onClick","strategy"],"sources":["/Users/viktoriaromazanova/PycharmProjects/vk_chatgpt/frontend/node_modules/@vkontakte/vkui/src/components/ActionSheet/ActionSheet.tsx"],"sourcesContent":["'use client';\n\nimport * as React from 'react';\nimport { noop } from '@vkontakte/vkjs';\nimport { useAdaptivityWithJSMediaQueries } from '../../hooks/useAdaptivityWithJSMediaQueries';\nimport { type UseFocusTrapProps } from '../../hooks/useFocusTrap';\nimport { usePlatform } from '../../hooks/usePlatform';\nimport { useCSSKeyframesAnimationController } from '../../lib/animation';\nimport { AppRootPortal } from '../AppRoot/AppRootPortal';\nimport { useScrollLock } from '../AppRoot/ScrollContext';\nimport { PopoutWrapper } from '../PopoutWrapper/PopoutWrapper';\nimport { Footnote } from '../Typography/Footnote/Footnote';\nimport { ActionSheetContext, type ItemClickHandler } from './ActionSheetContext';\nimport { ActionSheetDefaultIosCloseItem } from './ActionSheetDefaultIosCloseItem';\nimport { ActionSheetDropdownMenu } from './ActionSheetDropdownMenu';\nimport { ActionSheetDropdownSheet } from './ActionSheetDropdownSheet';\nimport type { SharedDropdownProps } from './types';\nimport styles from './ActionSheet.module.css';\n\ntype CloseInitiators = 'action-item' | 'cancel-item' | 'other';\nexport interface ActionSheetOnCloseOptions {\n  closedBy: CloseInitiators;\n}\n\nexport interface ActionSheetProps\n  extends Pick<\n      SharedDropdownProps,\n      'toggleRef' | 'popupOffsetDistance' | 'placement' | 'allowClickPropagation'\n    >,\n    Omit<UseFocusTrapProps, 'onClose'>,\n    Omit<React.HTMLAttributes<HTMLDivElement>, 'autoFocus' | 'title'> {\n  title?: React.ReactNode;\n  description?: React.ReactNode;\n  /**\n   * Закрыть попап по клику снаружи.\n   */\n  onClose: (options: ActionSheetOnCloseOptions) => void;\n  /**\n   * Только мобильный iOS.\n   */\n  iosCloseItem?: React.ReactNode;\n  mode?: 'sheet' | 'menu';\n}\n\n/**\n * @see https://vkcom.github.io/VKUI/#/ActionSheet\n */\nexport const ActionSheet = ({\n  children,\n  className,\n  title,\n  description,\n  style,\n  iosCloseItem,\n  popupOffsetDistance,\n  placement,\n  mode: modeProp,\n  onClose,\n  ...restProps\n}: ActionSheetProps): React.ReactNode => {\n  const platform = usePlatform();\n  const [closingBy, setClosingBy] = React.useState<undefined | CloseInitiators>(undefined);\n  const onCloseWithOther = React.useCallback(() => setClosingBy('other'), []);\n  const actionCallbackRef = React.useRef(noop);\n\n  const [animationState, animationHandlers] = useCSSKeyframesAnimationController(\n    closingBy !== undefined ? 'exit' : 'enter',\n    {\n      onExited() {\n        onClose({ closedBy: closingBy || 'other' });\n        actionCallbackRef.current();\n        actionCallbackRef.current = noop;\n      },\n    },\n  );\n\n  const { isDesktop } = useAdaptivityWithJSMediaQueries();\n  const mode = modeProp ?? (isDesktop ? 'menu' : 'sheet');\n\n  useScrollLock(mode === 'sheet');\n\n  const onItemClick = React.useCallback<ItemClickHandler>(\n    ({ action, immediateAction, autoClose, isCancelItem }) =>\n      (event) => {\n        event.persist();\n        immediateAction && immediateAction(event);\n        if (autoClose) {\n          if (action) {\n            actionCallbackRef.current = () => action(event);\n          }\n          setClosingBy(isCancelItem ? 'cancel-item' : 'action-item');\n        } else {\n          action && action(event);\n        }\n      },\n    [],\n  );\n  const contextValue = React.useMemo(\n    () => ({ onItemClick, mode, onClose: onCloseWithOther }),\n    [mode, onCloseWithOther, onItemClick],\n  );\n\n  const DropdownComponent = mode === 'menu' ? ActionSheetDropdownMenu : ActionSheetDropdownSheet;\n\n  const dropdownProps =\n    mode === 'menu' ? Object.assign(restProps, { popupOffsetDistance, placement }) : restProps;\n\n  const actionSheet = (\n    <ActionSheetContext.Provider value={contextValue}>\n      <DropdownComponent\n        closing={Boolean(closingBy)}\n        role=\"dialog\"\n        aria-modal=\"true\"\n        autoFocus={animationState === 'entered'}\n        {...dropdownProps}\n        {...animationHandlers}\n        onClose={onCloseWithOther}\n        className={mode === 'menu' ? className : undefined}\n        style={mode === 'menu' ? style : undefined}\n      >\n        <div className={styles.contentWrapper}>\n          {(title || description) && (\n            <div className={styles.header}>\n              {title && (\n                <Footnote weight=\"2\" className={styles.title}>\n                  {title}\n                </Footnote>\n              )}\n              {description && <Footnote className={styles.description}>{description}</Footnote>}\n            </div>\n          )}\n          {children}\n        </div>\n        {platform === 'ios' && mode === 'sheet' && (\n          <div className={styles.closeItemWrapperIos}>\n            {iosCloseItem ?? <ActionSheetDefaultIosCloseItem />}\n          </div>\n        )}\n      </DropdownComponent>\n    </ActionSheetContext.Provider>\n  );\n\n  return (\n    <AppRootPortal>\n      <PopoutWrapper\n        noBackground={mode === 'menu'}\n        closing={Boolean(closingBy)}\n        alignY=\"bottom\"\n        className={className}\n        style={style}\n        onClick={onCloseWithOther}\n        strategy=\"fixed\"\n      >\n        {actionSheet}\n      </PopoutWrapper>\n    </AppRootPortal>\n  );\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}