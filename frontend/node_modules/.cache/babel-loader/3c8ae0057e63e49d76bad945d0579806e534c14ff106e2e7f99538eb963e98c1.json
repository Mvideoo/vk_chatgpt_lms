{"ast":null,"code":"import { _ as _object_spread } from \"@swc/helpers/_/_object_spread\";\nimport * as React from \"react\";\nimport { getMergedSameEventsByProps } from \"../helpers/getMergedSameEventsByProps.js\";\nimport { isDOMTypeElement, isForwardRefElement, isValidNotReactFragmentElement } from \"../lib/utils.js\";\nimport { warnOnce } from \"../lib/warnOnce.js\";\nimport { useEffectDev } from \"./useEffectDev.js\";\nimport { useExternRef } from \"./useExternRef.js\";\nconst warn = warnOnce('usePatchChildren');\n/**\n * –•—É–∫ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–æ–ø–∞—Ç—á–∏—Ç—å –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Ç–∞–∫, —á—Ç–æ–±—ã –º–æ–∂–Ω–æ –±—ã–ª–æ –ø–æ–ª—É—á–∏—Ç—å —Å—Å—ã–ª–∫—É –Ω–∞ –µ–≥–æ\n * DOM-—ç–ª–µ–º–µ–Ω—Ç. –¢–∞–∫–∂–µ –µ—Å—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø—Ä–æ–∫–∏–Ω—É—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã.\n *\n * @param children\n * @param injectProps\n * @param externRef ‚Äì –ø–æ–ª–µ–∑–µ–Ω –∫–æ–≥–¥–∞ –Ω—É–∂–Ω–æ –ø—Ä–æ–∫–∏–Ω—É—Ç—å `ref` —ç–ª–µ–º–µ–Ω—Ç—É –≤—ã—à–µ.\n *\n * üëé –ë–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ `externRef`\n * ```ts\n * const { ref } = useSomeHook();\n * const [childRef, child] = usePatchChildren(children);\n * React.useLayoutEffect(() => {\n *   ref.current = childRef.current; // –∏–ª–∏ ref.current(childRef.current)\n * }, [childRef]);\n * ```\n *\n * üëç –° –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º `externRef`\n * ```ts\n * const { ref } = useSomeHook();\n * const [childRef, child] = usePatchChildren(children, undefined, ref);\n * ```\n */\nexport const usePatchChildren = (children, injectProps, externRef) => {\n  const isValidElementResult = isValidNotReactFragmentElement(children);\n  const isDOMTypeElementResult = isValidElementResult && isDOMTypeElement(children);\n  const isForwardedRefElementResult = isValidElementResult && isForwardRefElement(children);\n  const shouldUseRef = isDOMTypeElementResult || isForwardedRefElementResult;\n  const childRef = useExternRef(shouldUseRef ? children.ref : isValidElementResult ? children.props.getRootRef : undefined, externRef);\n  const mergedEventsByInjectProps = getMergedSameEventsByProps(injectProps ? injectProps : {}, isValidElementResult ? children.props : {});\n  const props = shouldUseRef ? _object_spread({\n    ref: childRef\n  }, injectProps, mergedEventsByInjectProps) : isValidElementResult ? _object_spread({\n    getRootRef: childRef\n  }, injectProps, mergedEventsByInjectProps) : undefined;\n  const patchedChildren = isValidElementResult ? React.cloneElement(children, props) : children;\n  useEffectDev(() => {\n    if (!childRef.current && !shouldUseRef) {\n      warn('–ö–∞–∂–µ—Ç—Å—è, –≤ children –ø–µ—Ä–µ–¥–∞–Ω –∫–æ–º–ø–æ–Ω–µ–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Å–≤–æ–π—Å—Ç–≤–æ getRootRef. –ú—ã –Ω–µ –º–æ–∂–µ–º –ø–æ–ª—É—á–∏—Ç—å —Å—Å—ã–ª–∫—É –Ω–∞ –∫–æ—Ä–Ω–µ–≤–æ–π dom-—ç–ª–µ–º–µ–Ω—Ç —ç—Ç–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞', 'error');\n    }\n  }, [isValidElementResult ? children.type : null, shouldUseRef, childRef]);\n  return [childRef, patchedChildren];\n};","map":{"version":3,"names":["React","getMergedSameEventsByProps","isDOMTypeElement","isForwardRefElement","isValidNotReactFragmentElement","warnOnce","useEffectDev","useExternRef","warn","usePatchChildren","children","injectProps","externRef","isValidElementResult","isDOMTypeElementResult","isForwardedRefElementResult","shouldUseRef","childRef","ref","props","getRootRef","undefined","mergedEventsByInjectProps","_object_spread","patchedChildren","cloneElement","current","type"],"sources":["/Users/viktoriaromazanova/PycharmProjects/vk_chatgpt/frontend/node_modules/@vkontakte/vkui/src/hooks/usePatchChildren.ts"],"sourcesContent":["import * as React from 'react';\nimport { getMergedSameEventsByProps } from '../helpers/getMergedSameEventsByProps';\nimport {\n  isDOMTypeElement,\n  isForwardRefElement,\n  isValidNotReactFragmentElement,\n} from '../lib/utils';\nimport { warnOnce } from '../lib/warnOnce';\nimport type { HasRootRef } from '../types';\nimport { useEffectDev } from './useEffectDev';\nimport { useExternRef } from './useExternRef';\n\nconst warn = warnOnce('usePatchChildren');\n\ntype InjectProps<T> = Omit<React.HTMLAttributes<T>, keyof React.DOMAttributes<T>> &\n  React.Attributes & {\n    ref?: React.Ref<T>;\n  };\n\ntype ExpectedReactElement<T> = React.ReactElement<HasRootRef<T> & React.DOMAttributes<T>>;\n\ntype ChildrenElement<T> = ExpectedReactElement<T> | React.ReactNode;\n\n/**\n * –•—É–∫ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–æ–ø–∞—Ç—á–∏—Ç—å –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Ç–∞–∫, —á—Ç–æ–±—ã –º–æ–∂–Ω–æ –±—ã–ª–æ –ø–æ–ª—É—á–∏—Ç—å —Å—Å—ã–ª–∫—É –Ω–∞ –µ–≥–æ\n * DOM-—ç–ª–µ–º–µ–Ω—Ç. –¢–∞–∫–∂–µ –µ—Å—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø—Ä–æ–∫–∏–Ω—É—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã.\n *\n * @param children\n * @param injectProps\n * @param externRef ‚Äì –ø–æ–ª–µ–∑–µ–Ω –∫–æ–≥–¥–∞ –Ω—É–∂–Ω–æ –ø—Ä–æ–∫–∏–Ω—É—Ç—å `ref` —ç–ª–µ–º–µ–Ω—Ç—É –≤—ã—à–µ.\n *\n * üëé –ë–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ `externRef`\n * ```ts\n * const { ref } = useSomeHook();\n * const [childRef, child] = usePatchChildren(children);\n * React.useLayoutEffect(() => {\n *   ref.current = childRef.current; // –∏–ª–∏ ref.current(childRef.current)\n * }, [childRef]);\n * ```\n *\n * üëç –° –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º `externRef`\n * ```ts\n * const { ref } = useSomeHook();\n * const [childRef, child] = usePatchChildren(children, undefined, ref);\n * ```\n */\nexport const usePatchChildren = <ElementType extends HTMLElement = HTMLElement>(\n  children?: ChildrenElement<ElementType>,\n  injectProps?: InjectProps<ElementType>,\n  externRef?: React.Ref<ElementType>,\n): [React.RefObject<ElementType | null>, ChildrenElement<ElementType> | undefined] => {\n  const isValidElementResult = isValidNotReactFragmentElement(children);\n  const isDOMTypeElementResult =\n    isValidElementResult &&\n    isDOMTypeElement<React.HTMLAttributes<ElementType>, ElementType>(children);\n\n  const isForwardedRefElementResult =\n    isValidElementResult &&\n    isForwardRefElement<React.HTMLAttributes<ElementType>, ElementType>(children);\n\n  const shouldUseRef = isDOMTypeElementResult || isForwardedRefElementResult;\n  const childRef = useExternRef<ElementType>(\n    shouldUseRef ? children.ref : isValidElementResult ? children.props.getRootRef : undefined,\n    externRef,\n  );\n\n  const mergedEventsByInjectProps = getMergedSameEventsByProps(\n    injectProps ? injectProps : {},\n    isValidElementResult ? children.props : {},\n  );\n\n  const props = shouldUseRef\n    ? { ref: childRef, ...injectProps, ...mergedEventsByInjectProps }\n    : isValidElementResult\n      ? { getRootRef: childRef, ...injectProps, ...mergedEventsByInjectProps }\n      : undefined;\n\n  const patchedChildren = isValidElementResult ? React.cloneElement(children, props) : children;\n\n  useEffectDev(() => {\n    if (!childRef.current && !shouldUseRef) {\n      warn(\n        '–ö–∞–∂–µ—Ç—Å—è, –≤ children –ø–µ—Ä–µ–¥–∞–Ω –∫–æ–º–ø–æ–Ω–µ–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Å–≤–æ–π—Å—Ç–≤–æ getRootRef. –ú—ã –Ω–µ –º–æ–∂–µ–º –ø–æ–ª—É—á–∏—Ç—å —Å—Å—ã–ª–∫—É –Ω–∞ –∫–æ—Ä–Ω–µ–≤–æ–π dom-—ç–ª–µ–º–µ–Ω—Ç —ç—Ç–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞',\n        'error',\n      );\n    }\n  }, [isValidElementResult ? children.type : null, shouldUseRef, childRef]);\n\n  return [childRef, patchedChildren];\n};\n"],"mappings":";AAAA,YAAYA,KAAA,MAAW;AACvB,SAASC,0BAA0B,QAAQ;AAC3C,SACEC,gBAAgB,EAChBC,mBAAmB,EACnBC,8BAA8B,QACzB;AACP,SAASC,QAAQ,QAAQ;AAEzB,SAASC,YAAY,QAAQ;AAC7B,SAASC,YAAY,QAAQ;AAE7B,MAAMC,IAAA,GAAOH,QAAA,CAAS;AAWtB;;;;;;;;;;;;;;;;;;;;;;;AAuBA,OAAO,MAAMI,gBAAA,GAAmBA,CAC9BC,QAAA,EACAC,WAAA,EACAC,SAAA;EAEA,MAAMC,oBAAA,GAAuBT,8BAAA,CAA+BM,QAAA;EAC5D,MAAMI,sBAAA,GACJD,oBAAA,IACAX,gBAAA,CAAiEQ,QAAA;EAEnE,MAAMK,2BAAA,GACJF,oBAAA,IACAV,mBAAA,CAAoEO,QAAA;EAEtE,MAAMM,YAAA,GAAeF,sBAAA,IAA0BC,2BAAA;EAC/C,MAAME,QAAA,GAAWV,YAAA,CACfS,YAAA,GAAeN,QAAA,CAASQ,GAAG,GAAGL,oBAAA,GAAuBH,QAAA,CAASS,KAAK,CAACC,UAAU,GAAGC,SAAA,EACjFT,SAAA;EAGF,MAAMU,yBAAA,GAA4BrB,0BAAA,CAChCU,WAAA,GAAcA,WAAA,GAAc,CAAC,GAC7BE,oBAAA,GAAuBH,QAAA,CAASS,KAAK,GAAG,CAAC;EAG3C,MAAMA,KAAA,GAAQH,YAAA,GACVO,cAAA;IAAEL,GAAA,EAAKD;KAAaN,WAAA,EAAgBW,yBAAA,IACpCT,oBAAA,GACEU,cAAA;IAAEH,UAAA,EAAYH;KAAaN,WAAA,EAAgBW,yBAAA,IAC3CD,SAAA;EAEN,MAAMG,eAAA,GAAkBX,oBAAA,GAAuBb,KAAA,CAAMyB,YAAY,CAACf,QAAA,EAAUS,KAAA,IAAST,QAAA;EAErFJ,YAAA,CAAa;IACX,IAAI,CAACW,QAAA,CAASS,OAAO,IAAI,CAACV,YAAA,EAAc;MACtCR,IAAA,CACE,4JACA;IAEJ;EACF,GAAG,CAACK,oBAAA,GAAuBH,QAAA,CAASiB,IAAI,GAAG,MAAMX,YAAA,EAAcC,QAAA,CAAS;EAExE,OAAO,CAACA,QAAA,EAAUO,eAAA,CAAgB;AACpC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}